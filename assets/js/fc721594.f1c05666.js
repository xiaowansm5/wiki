"use strict";(self.webpackChunkwiki=self.webpackChunkwiki||[]).push([[7606],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),u=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),k=u(n),d=a,m=k["".concat(p,".").concat(d)]||k[d]||c[d]||l;return n?r.createElement(m,o(o({ref:t},s),{},{components:n})):r.createElement(m,o({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,o=new Array(l);o[0]=k;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var u=2;u<l;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}k.displayName="MDXCreateElement"},314:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const l={title:"JWT \u9274\u6743",description:"JWT \u9274\u6743",keywords:["JWT","Java","\u9274\u6743"],tags:["\u6743\u9650"],sidebar_position:4,author:"7Wate",date:new Date("2022-08-31T00:00:00.000Z")},o=void 0,i={unversionedId:"\u7cfb\u7edf\u6743\u9650/\u9274\u6743\u89e3\u51b3\u65b9\u6848/JWT\uff08JSON Web Token\uff09\u9274\u6743",id:"\u7cfb\u7edf\u6743\u9650/\u9274\u6743\u89e3\u51b3\u65b9\u6848/JWT\uff08JSON Web Token\uff09\u9274\u6743",title:"JWT \u9274\u6743",description:"JWT \u9274\u6743",source:"@site/work/devsec/\u7cfb\u7edf\u6743\u9650/\u9274\u6743\u89e3\u51b3\u65b9\u6848/JWT\uff08JSON Web Token\uff09\u9274\u6743.md",sourceDirName:"\u7cfb\u7edf\u6743\u9650/\u9274\u6743\u89e3\u51b3\u65b9\u6848",slug:"/\u7cfb\u7edf\u6743\u9650/\u9274\u6743\u89e3\u51b3\u65b9\u6848/JWT\uff08JSON Web Token\uff09\u9274\u6743",permalink:"/devsec/\u7cfb\u7edf\u6743\u9650/\u9274\u6743\u89e3\u51b3\u65b9\u6848/JWT\uff08JSON Web Token\uff09\u9274\u6743",draft:!1,tags:[{label:"\u6743\u9650",permalink:"/devsec/tags/\u6743\u9650"}],version:"current",sidebarPosition:4,frontMatter:{title:"JWT \u9274\u6743",description:"JWT \u9274\u6743",keywords:["JWT","Java","\u9274\u6743"],tags:["\u6743\u9650"],sidebar_position:4,author:"7Wate",date:"2022-08-31T00:00:00.000Z"},sidebar:"tutorialSidebar",previous:{title:"Token \u9274\u6743",permalink:"/devsec/\u7cfb\u7edf\u6743\u9650/\u9274\u6743\u89e3\u51b3\u65b9\u6848/Token \u9274\u6743"},next:{title:"SSO \u5355\u70b9\u767b\u5f55",permalink:"/devsec/\u7cfb\u7edf\u6743\u9650/\u9274\u6743\u89e3\u51b3\u65b9\u6848/\u5355\u70b9\u767b\u5f55\uff08Single Sign On\uff09"}},p={},u=[{value:"JWT\uff08JSON Web Token\uff09\u9274\u6743",id:"jwtjson-web-token\u9274\u6743",level:2},{value:"JWT \u7684\u5b9a\u4e49",id:"jwt-\u7684\u5b9a\u4e49",level:3},{value:"JWT \u7684\u7ec4\u6210",id:"jwt-\u7684\u7ec4\u6210",level:3},{value:"Header \u5934\u90e8",id:"header-\u5934\u90e8",level:4},{value:"Payload \u8d1f\u8f7d",id:"payload-\u8d1f\u8f7d",level:4},{value:"Signature \u7b7e\u540d",id:"signature-\u7b7e\u540d",level:4},{value:"JWT \u7684\u4f7f\u7528\u65b9\u5f0f",id:"jwt-\u7684\u4f7f\u7528\u65b9\u5f0f",level:3},{value:"JWT \u7684\u8ba4\u8bc1\u6d41\u7a0b\u56fe",id:"jwt-\u7684\u8ba4\u8bc1\u6d41\u7a0b\u56fe",level:3},{value:"JWT \u7684\u4f18\u70b9",id:"jwt-\u7684\u4f18\u70b9",level:3},{value:"JWT \u7684\u7f3a\u70b9",id:"jwt-\u7684\u7f3a\u70b9",level:3}],s={toc:u};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"jwtjson-web-token\u9274\u6743"},"JWT\uff08JSON Web Token\uff09\u9274\u6743"),(0,a.kt)("p",null,"\u901a\u8fc7\u7b2c\u4e09\u8282\uff0c\u6211\u4eec\u77e5\u9053\u4e86 Token \u7684\u4f7f\u7528\u65b9\u5f0f\u4ee5\u53ca\u7ec4\u6210\uff0c\u6211\u4eec\u4e0d\u96be\u53d1\u73b0\uff0c\u670d\u52a1\u7aef\u9a8c\u8bc1\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684 Token \u65f6\uff0c\u8fd8\u9700\u8981\u67e5\u8be2\u6570\u636e\u5e93\u83b7\u53d6\u7528\u6237\u57fa\u672c\u4fe1\u606f\uff0c\u7136\u540e\u9a8c\u8bc1 Token \u662f\u5426\u6709\u6548\uff1b\u8fd9\u6837\u6bcf\u6b21\u8bf7\u6c42\u9a8c\u8bc1\u90fd\u8981\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u589e\u52a0\u4e86\u67e5\u5e93\u5e26\u6765\u7684\u5ef6\u8fdf\u7b49\u6027\u80fd\u6d88\u8017\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u90a3\u4e48\u8fd9\u65f6\u5019\u4e1a\u754c\u5e38\u7528\u7684  JWT \u5c31\u5e94\u8fd0\u800c\u751f\u4e86\uff01\uff01\uff01")),(0,a.kt)("h3",{id:"jwt-\u7684\u5b9a\u4e49"},"JWT \u7684\u5b9a\u4e49"),(0,a.kt)("p",null,"JWT \u662f Auth0 \u63d0\u51fa\u7684\u901a\u8fc7\u5bf9 JSON \u8fdb\u884c\u52a0\u5bc6\u7b7e\u540d\u6765\u5b9e\u73b0\u6388\u6743\u9a8c\u8bc1\u7684\u65b9\u6848\u3002"),(0,a.kt)("p",null,"\u5c31\u662f\u767b\u5f55\u6210\u529f\u540e\u5c06\u76f8\u5173\u7528\u6237\u4fe1\u606f\u7ec4\u6210 JSON \u5bf9\u8c61\uff0c\u7136\u540e\u5bf9\u8fd9\u4e2a\u5bf9\u8c61\u8fdb\u884c\u67d0\u79cd\u65b9\u5f0f\u7684\u52a0\u5bc6\uff0c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1b \u5ba2\u6237\u7aef\u5728\u4e0b\u6b21\u8bf7\u6c42\u65f6\u5e26\u4e0a\u8fd9\u4e2a Token\uff1b \u670d\u52a1\u7aef\u518d\u6536\u5230\u8bf7\u6c42\u65f6\u6821\u9a8c token \u5408\u6cd5\u6027\uff0c\u5176\u5b9e\u4e5f\u5c31\u662f\u5728\u6821\u9a8c\u8bf7\u6c42\u7684\u5408\u6cd5\u6027\u3002"),(0,a.kt)("h3",{id:"jwt-\u7684\u7ec4\u6210"},"JWT \u7684\u7ec4\u6210"),(0,a.kt)("p",null,"JWT \u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a",(0,a.kt)("strong",{parentName:"p"},"Header \u5934\u90e8"),"\u3001",(0,a.kt)("strong",{parentName:"p"},"Payload \u8d1f\u8f7d"),"\u548c ",(0,a.kt)("strong",{parentName:"p"},"Signature \u7b7e\u540d"),"\u3002\u5b83\u662f\u4e00\u4e2a\u5f88\u957f\u7684\u5b57\u7b26\u4e32\uff0c\u4e2d\u95f4\u7528\uff08 . \uff09\u5206\u9694\u6210\u4e09\u4e2a\u90e8\u5206\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c\n")),(0,a.kt)("h4",{id:"header-\u5934\u90e8"},"Header \u5934\u90e8"),(0,a.kt)("p",null,"\u5728 Header \u4e2d\u901a\u5e38\u5305\u542b\u4e86\u4e24\u90e8\u5206\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"typ\uff1a\u4ee3\u8868 Token \u7684\u7c7b\u578b\uff0c\u8fd9\u91cc\u4f7f\u7528\u7684\u662f JWT \u7c7b\u578b\u3002"),(0,a.kt)("li",{parentName:"ul"},"alg\uff1a\u4f7f\u7528\u7684 Hash \u7b97\u6cd5\uff0c\u4f8b\u5982 HMAC SHA256 \u6216 RSA\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "alg": "HS256",\n   "typ": "JWT"\n}\n')),(0,a.kt)("h4",{id:"payload-\u8d1f\u8f7d"},"Payload \u8d1f\u8f7d"),(0,a.kt)("p",null,"\u5b83\u5305\u542b\u4e00\u4e9b\u58f0\u660e Claim\uff08\u5b9e\u4f53\u7684\u63cf\u8ff0\uff0c\u901a\u5e38\u662f\u4e00\u4e2a User \u4fe1\u606f\uff0c\u8fd8\u5305\u62ec\u4e00\u4e9b\u5176\u4ed6\u7684\u5143\u6570\u636e\uff09\uff0c\u7528\u6765\u5b58\u653e\u5b9e\u9645\u9700\u8981\u4f20\u9012\u7684\u6570\u636e\uff0cJWT \u89c4\u5b9a\u4e867\u4e2a\u5b98\u65b9\u5b57\u6bb5\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"iss\uff08issuer\uff09\uff1a\u7b7e\u53d1\u4eba"),(0,a.kt)("li",{parentName:"ul"},"exp\uff08expiration time\uff09\uff1a\u8fc7\u671f\u65f6\u95f4"),(0,a.kt)("li",{parentName:"ul"},"sub\uff08subject\uff09\uff1a\u4e3b\u9898"),(0,a.kt)("li",{parentName:"ul"},"aud\uff08audience\uff09\uff1a\u53d7\u4f17"),(0,a.kt)("li",{parentName:"ul"},"nbf\uff08Not Before\uff09\uff1a\u751f\u6548\u65f6\u95f4"),(0,a.kt)("li",{parentName:"ul"},"iat\uff08Issued At\uff09\uff1a\u7b7e\u53d1\u65f6\u95f4"),(0,a.kt)("li",{parentName:"ul"},"jti\uff08JWT ID\uff09\uff1a\u7f16\u53f7")),(0,a.kt)("p",null,"\u9664\u4e86\u5b98\u65b9\u5b57\u6bb5\uff0c\u4f60\u8fd8\u53ef\u4ee5\u5728\u8fd9\u4e2a\u90e8\u5206\u5b9a\u4e49\u79c1\u6709\u5b57\u6bb5\uff0c\u4e0b\u9762\u5c31\u662f\u4e00\u4e2a\u4f8b\u5b50\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n   "sub": "1234567890",\n   "name": "John Doe",\n   "admin": true\n}\n')),(0,a.kt)("h4",{id:"signature-\u7b7e\u540d"},"Signature \u7b7e\u540d"),(0,a.kt)("p",null,"Signature \u90e8\u5206\u662f\u5bf9\u524d\u4e24\u90e8\u5206\u7684\u7b7e\u540d\uff0c\u9632\u6b62\u6570\u636e\u7be1\u6539\u3002"),(0,a.kt)("p",null,"\u9996\u5148\uff0c\u9700\u8981\u6307\u5b9a\u4e00\u4e2a\u5bc6\u94a5\uff08secret\uff09\u3002\u8fd9\u4e2a\u5bc6\u94a5\u53ea\u6709\u670d\u52a1\u5668\u624d\u77e5\u9053\uff0c\u4e0d\u80fd\u6cc4\u9732\u7ed9\u7528\u6237\u3002\u7136\u540e\uff0c\u4f7f\u7528 Header \u91cc\u9762\u6307\u5b9a\u7684\u7b7e\u540d\u7b97\u6cd5\uff08\u9ed8\u8ba4\u662f HMAC SHA256\uff09\uff0c\u6309\u7167\u4e0b\u9762\u7684\u516c\u5f0f\u4ea7\u751f\u7b7e\u540d\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'HMACSHA256(\n   base64UrlEncode(header) + "." +\n   base64UrlEncode(payload),\n   secret)\n')),(0,a.kt)("h3",{id:"jwt-\u7684\u4f7f\u7528\u65b9\u5f0f"},"JWT \u7684\u4f7f\u7528\u65b9\u5f0f"),(0,a.kt)("p",null,"\u5ba2\u6237\u7aef\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7684 JWT\uff0c\u53ef\u4ee5\u50a8\u5b58\u5728 Cookie \u91cc\u9762\uff0c\u4e5f\u53ef\u4ee5\u50a8\u5b58\u5728 localStorage\u3002"),(0,a.kt)("p",null,"\u6b64\u540e\uff0c\u5ba2\u6237\u7aef\u6bcf\u6b21\u4e0e\u670d\u52a1\u5668\u901a\u4fe1\uff0c\u90fd\u8981\u5e26\u4e0a\u8fd9\u4e2a JWT\u3002\u4f60\u53ef\u4ee5\u628a\u5b83\u653e\u5728 Cookie \u91cc\u9762\u81ea\u52a8\u53d1\u9001\uff0c\u4f46\u662f\u8fd9\u6837\u4e0d\u80fd\u8de8\u57df\uff0c\u6240\u4ee5\u66f4\u597d\u7684\u505a\u6cd5\u662f\u653e\u5728 HTTP \u8bf7\u6c42\u7684\u5934\u4fe1\u606f Authorization \u5b57\u6bb5\u91cc\u9762\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-http"}," Authorization: Bearer <token>\n")),(0,a.kt)("h3",{id:"jwt-\u7684\u8ba4\u8bc1\u6d41\u7a0b\u56fe"},"JWT \u7684\u8ba4\u8bc1\u6d41\u7a0b\u56fe"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://static.7wate.com/img/2022/08/30/d6666d37094db.png",alt:"JWT \u7684\u8ba4\u8bc1\u6d41\u7a0b\u56fe"})),(0,a.kt)("h3",{id:"jwt-\u7684\u4f18\u70b9"},"JWT \u7684\u4f18\u70b9"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4e0d\u9700\u8981\u5728\u670d\u52a1\u7aef\u4fdd\u5b58\u4f1a\u8bdd\u4fe1\u606f\uff08RESTful API \u7684\u539f\u5219\u4e4b\u4e00\u5c31\u662f\u65e0\u72b6\u6001\uff09\uff0c\u6240\u4ee5\u6613\u4e8e\u5e94\u7528\u7684\u6269\u5c55\uff0c\u5373\u4fe1\u606f\u4e0d\u4fdd\u5b58\u5728\u670d\u52a1\u7aef\uff0c\u4e0d\u4f1a\u5b58\u5728 Session \u6269\u5c55\u4e0d\u65b9\u4fbf\u7684\u60c5\u51b5\u3002"),(0,a.kt)("li",{parentName:"ul"},"JWT \u4e2d\u7684 Payload \u8d1f\u8f7d\u53ef\u4ee5\u5b58\u50a8\u5e38\u7528\u4fe1\u606f\uff0c\u7528\u4e8e\u4fe1\u606f\u4ea4\u6362\uff0c\u6709\u6548\u5730\u4f7f\u7528 JWT\uff0c\u53ef\u4ee5\u964d\u4f4e\u670d\u52a1\u7aef\u67e5\u8be2\u6570\u636e\u5e93\u7684\u6b21\u6570\u3002")),(0,a.kt)("h3",{id:"jwt-\u7684\u7f3a\u70b9"},"JWT \u7684\u7f3a\u70b9"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u52a0\u5bc6\u95ee\u9898\uff1a")," JWT \u9ed8\u8ba4\u662f\u4e0d\u52a0\u5bc6\uff0c\u4f46\u4e5f\u662f\u53ef\u4ee5\u52a0\u5bc6\u7684\uff1b\u751f\u6210\u539f\u59cb Token \u4ee5\u540e\uff0c\u53ef\u4ee5\u7528\u5bc6\u94a5\u518d\u52a0\u5bc6\u4e00\u6b21\u3002"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5230\u671f\u95ee\u9898\uff1a")," \u7531\u4e8e\u670d\u52a1\u5668\u4e0d\u4fdd\u5b58 Session \u72b6\u6001\uff0c\u56e0\u6b64\u65e0\u6cd5\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u5e9f\u6b62\u67d0\u4e2a Token\uff0c\u6216\u8005\u66f4\u6539 Token \u7684\u6743\u9650\u3002\u4e00\u65e6 JWT \u7b7e\u53d1\u4e86\uff0c\u5728\u5230\u671f\u4e4b\u524d\u5c31\u4f1a\u59cb\u7ec8\u6709\u6548\uff0c\u9664\u975e\u670d\u52a1\u5668\u90e8\u7f72\u989d\u5916\u7684\u903b\u8f91\u3002")))}c.isMDXComponent=!0}}]);