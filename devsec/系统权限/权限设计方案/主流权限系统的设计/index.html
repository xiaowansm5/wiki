<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-devsec docs-doc-id-系统权限/权限设计方案/主流权限系统的设计">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">主流权限系统的设计 | 时光wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.w2aa.ml/devsec/系统权限/权限设计方案/主流权限系统的设计"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="时光, wiki, blog, c, c++, java, python, linux"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-devsec-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-devsec-current"><meta data-rh="true" property="og:title" content="主流权限系统的设计 | 时光wiki"><meta data-rh="true" name="description" content="权限管控可以通俗的理解为权力限制，即不同的人由于拥有不同权力，他所看到的、能使用的可能不一样。对应到一个应用系统，其实就是一个用户可能拥有不同的数据权限（看到的）和操作权限（使用的）。"><meta data-rh="true" property="og:description" content="权限管控可以通俗的理解为权力限制，即不同的人由于拥有不同权力，他所看到的、能使用的可能不一样。对应到一个应用系统，其实就是一个用户可能拥有不同的数据权限（看到的）和操作权限（使用的）。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wiki.w2aa.ml/devsec/系统权限/权限设计方案/主流权限系统的设计"><link data-rh="true" rel="alternate" href="https://wiki.w2aa.ml/devsec/系统权限/权限设计方案/主流权限系统的设计" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://wiki.w2aa.ml/devsec/系统权限/权限设计方案/主流权限系统的设计" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://DCAGZNRUD5-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="时光`s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="时光`s Blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="时光`s Blog JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-MHMEL0F832","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MHMEL0F832"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MHMEL0F832",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="时光wiki" href="/opensearch.xml">















<script async defer="defer" data-website-id="/" src="/"></script><link rel="stylesheet" href="/assets/css/styles.7bc7ae63.css">
<link rel="preload" href="/assets/js/runtime~main.bc9acaa0.js" as="script">
<link rel="preload" href="/assets/js/main.a7f1e373.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">📚 时光&#x27;s Wiki</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">👨🏻‍🌾 博客</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">👨🏻‍🎓 维基</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/getting-started">基础入门</a></li><li><a class="dropdown__link" href="/programming-language">程序设计语言</a></li><li><a class="dropdown__link" href="/structures-algorithms">数据结构与算法</a></li><li><a class="dropdown__link" href="/computer-composition">计算机组成</a></li><li><a class="dropdown__link" href="/computer-network">计算机网络</a></li><li><a class="dropdown__link" href="/operating-system">操作系统</a></li><li><a class="dropdown__link" href="/database-system">数据库系统</a></li><li><a class="dropdown__link" href="/computer-security">计算机系统安全</a></li><li><a class="dropdown__link" href="/software-engineering">软件工程</a></li><li><a class="dropdown__link" href="/compilation-principle">编译原理</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">👨‍💻 职业</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/roadmap">求职之路</a></li><li><a class="dropdown__link" href="/devops">运维开发工程师</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/devsec">信息安全工程师</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">📁 网盘</a><ul class="dropdown__menu"><li><a href="https://p.w2nn.ml/" target="_blank" rel="noopener noreferrer" class="dropdown__link">固件仓库<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://pan.w2nn.ml/zh-CN/" target="_blank" rel="noopener noreferrer" class="dropdown__link">固件仓库[备用仓库]<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://xcloud.fly.dev/" target="_blank" rel="noopener noreferrer" class="dropdown__link">资源库<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">🧰 工具</a><ul class="dropdown__menu"><li><a href="https://sub.w2aa.ga/" target="_blank" rel="noopener noreferrer" class="dropdown__link">订阅转换<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://s.w2aa.ga/" target="_blank" rel="noopener noreferrer" class="dropdown__link">时光の短链<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://imgapi.xiaowansm.repl.co" target="_blank" rel="noopener noreferrer" class="dropdown__link">随机图api<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a class="navbar__item navbar__link" href="/life">🚴🏻‍♀️ 生活</a><a class="navbar__item navbar__link" href="/journal">📽️ 日志</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><b>📚 时光&#x27;s Wiki</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/devsec/">Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/devsec/密码学/密码学简明指南">密码学</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/devsec/系统权限/系统权限简明指南">系统权限</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devsec/系统权限/系统权限简明指南">系统权限简明指南</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/devsec/category/权限设计方案">权限设计方案</a><button aria-label="打开/收起侧边栏菜单「权限设计方案」" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/devsec/系统权限/权限设计方案/主流权限系统的设计">主流权限系统的设计</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/devsec/category/鉴权解决方案">鉴权解决方案</a><button aria-label="打开/收起侧边栏菜单「鉴权解决方案」" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/devsec/网络安全/OpenPGP/GnuPG 简明笔记">网络安全</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>主流权限系统的设计</h1></header><p>权限管控可以通俗的理解为权力限制，即不同的人由于拥有不同权力，他所看到的、能使用的可能不一样。对应到一个应用系统，其实就是一个用户可能拥有不同的数据权限（看到的）和操作权限（使用的）。</p><p>主流的权限模型主要分为以下五种：</p><ul><li><strong>ACL模型</strong>：访问控制列表</li><li><strong>DAC模型</strong>：自主访问控制</li><li><strong>MAC模型</strong>：强制访问控制</li><li><strong>ABAC模型</strong>：基于属性的访问控制</li><li><strong>RBAC模型</strong>：基于角色的权限访问控制</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="acl-模型访问控制列表">ACL 模型：访问控制列表<a class="hash-link" href="#acl-模型访问控制列表" title="标题的直接链接">​</a></h2><p><strong>Access Control List</strong>，ACL 是最早的、最基本的一种访问控制机制，是基于客体进行控制的模型，在其他模型中也有 ACL 的身影。为了解决相同权限的用户挨个配置的问题，后来也采用了用户组的方式。</p><p><strong>原理</strong>：每一个客体都有一个列表，列表中记录的是哪些主体可以对这个客体做哪些行为，非常简单。</p><p><strong>例如</strong>：当用户A要对一篇文章进行编辑时，ACL 会先检查一下文章编辑功能的控制列表中有没有用户 A，有就可以编辑，无则不能编辑。再例如：不同等级的会员在产品中可使用的功能范围不同。</p><p><strong>缺点</strong>：当主体的数量较多时，配置和维护工作就会成本大、易出错。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dac-模型自主访问控制">DAC 模型：自主访问控制<a class="hash-link" href="#dac-模型自主访问控制" title="标题的直接链接">​</a></h2><p>Discretionary Access Control，DAC 是 ACL 的一种拓展。</p><p><strong>原理</strong>：在 ACL 模型的基础上，允许主体可以将自己拥有的权限自主地授予其他主体，所以权限可以任意传递。</p><p><strong>例如</strong>：常见于文件系统，LINUX，UNIX、WindowsNT 版本的操作系统都提供 DAC 的支持。</p><p><strong>缺点</strong>：对权限控制比较分散，例如无法简单地将一组文件设置统一的权限开放给指定的一群用户。主体的权限太大，无意间就可能泄露信息。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mac-模型强制访问控制">MAC 模型：强制访问控制<a class="hash-link" href="#mac-模型强制访问控制" title="标题的直接链接">​</a></h2><p><strong>Mandatory Access Control</strong>，MAC 模型中主要的是双向验证机制。常见于机密机构或者其他等级观念强烈的行业，如军用和市政安全领域的软件。</p><p><strong>原理</strong>：主体有一个权限标识，客体也有一个权限标识，而主体能否对该客体进行操作取决于双方的权限标识的关系。</p><p><strong>例如</strong>：将军分为上将 &gt; 中将 &gt; 少将，军事文件保密等级分为绝密 &gt; 机密 &gt; 秘密，规定不同军衔仅能访问不同保密等级的文件，如少将只能访问秘密文件；当某一账号访问某一文件时，系统会验证账号的军衔，也验证文件的保密等级，当军衔和保密等级相对应时才可以访问。</p><p><strong>缺点</strong>：控制太严格，实现工作量大，缺乏灵活性。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="abac-模型基于属性的访问控制">ABAC 模型：基于属性的访问控制<a class="hash-link" href="#abac-模型基于属性的访问控制" title="标题的直接链接">​</a></h2><p><strong>Attribute-Based Access Control</strong>，能很好地解决 RBAC 的缺点，在新增资源时容易维护。</p><p><strong>原理</strong>：通过动态计算一个或一组属性是否满足某种机制来授权，是一种很灵活的权限模型，可以按需实现不同颗粒度的权限控制。</p><p>属性通常有四类：</p><ol><li>主体属性，如用户年龄、性别等；</li><li>客体属性，如一篇文章等；</li><li>环境属性，即空间限制、时间限制、频度限制；</li><li>操作属性，即行为类型，如读写、只读等。</li></ol><p><strong>例如</strong>：早上 9:00，11:00 期间 A、B 两个部门一起以考生的身份考试，下午 14:00，17:00 期间 A、B 两个部门相互阅卷。</p><p><strong>缺点</strong>：规则复杂，不易看出主体与客体之间的关系，实现非常难，现在应用的很少。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="rbac-基于角色的权限访问控制">RBAC 基于角色的权限访问控制<a class="hash-link" href="#rbac-基于角色的权限访问控制" title="标题的直接链接">​</a></h2><p><strong>Role-Based Access Control</strong>，核心在于用户只和角色关联，而角色代表对了权限，是一系列权限的集合。</p><p>RBAC 三要素：</p><ol><li><strong>用户</strong>：系统中所有的账户</li><li><strong>角色</strong>：一系列权限的集合（如：管理员，开发者，审计管理员等）</li><li><strong>权限</strong>：菜单，按钮，数据的增删改查等详细权限。</li></ol><p>在 <strong>RBAC </strong>中，权限与角色相关联，用户通过成为适当角色的成员而得到这些角色的权限。</p><p>角色是为了完成各种工作而创造，用户则依据它的责任和资格来被指派相应的角色，用户可以很容易地从一个角色被指派到另一个角色。</p><p>角色可依新的需求和系统的合并而赋予新的权限，而权限也可根据需要而从某角色中回收。角色与角色的关系同样也存在继承关系防止越权。</p><p><strong>优点</strong>：便于角色划分，更灵活的授权管理；最小颗粒度授权；</p><p><img loading="lazy" src="https://static.7wate.com/img/2022/08/30/2fb0d9ad61795.png" alt="RBAC" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="rbac的深度拓展">RBAC的深度拓展<a class="hash-link" href="#rbac的深度拓展" title="标题的直接链接">​</a></h2><p>RBAC模型可以分为：<strong>RBAC0</strong>、<strong>RBAC1</strong>、<strong>RBAC2</strong>、<strong>RBAC3</strong> 四个阶段，一般公司使用 <strong>RBAC0</strong> 的模型就可以。另外，<strong>RBAC0</strong> 相当于底层逻辑，后三者都是在 <strong>RBAC0</strong> 模型上的拔高。</p><p>我先简单介绍下这四个RBAC模型：</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-rbac0-模型">1. RBAC0 模型<a class="hash-link" href="#1-rbac0-模型" title="标题的直接链接">​</a></h3><p>用户和角色、角色和权限多对多关系。</p><p>简单来说就是一个用户拥有多个角色，一个角色可以被多个用户拥有，这是用户和角色的多对多关系；同样的，角色和权限也是如此。</p><p><strong>RBAC0</strong> 模型如下图：没有画太多线，但是已经能够看出多对多关系。</p><p><img loading="lazy" src="https://static.7wate.com/img/2022/08/30/704178e086081.png" alt="RBAC0" class="img_ev3q"></p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-rbac1-模型">2. RBAC1 模型<a class="hash-link" href="#2-rbac1-模型" title="标题的直接链接">​</a></h3><p>相对于 <strong>RBAC0 </strong>模型，增加了<strong>角色分级</strong>的逻辑，类似于树形结构，下一节点继承上一节点的所有权限，如 <strong>role1</strong> 根节点下有 <strong>role1.1</strong> 和 <strong>role1.2</strong> 两个子节点</p><p><img loading="lazy" src="https://static.7wate.com/img/2022/08/30/ab50d1c150699.png" alt="RABC1" class="img_ev3q"></p><p>角色分级的逻辑可以有效的规范角色创建（主要得益于权限继承逻辑），我之前做过 BD 工具（类 CRM ），BD 之间就有分级（经理、主管、专员），如果采用 RBAC0 模型做权限系统，我可能需要为经理、主管、专员分别创建一个角色（角色之间权限无继承性），极有可能出现一个问题，由于权限配置错误，主管拥有经理都没有权限。</p><p>而 RBAC1 模型就很好解决了这个问题，创建完经理角色并配置好权限后，主管角色的权限继承经理角色的权限，并且支持针对性删减主管权限。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-rbac2-模型">3. RBAC2 模型<a class="hash-link" href="#3-rbac2-模型" title="标题的直接链接">​</a></h3><p>基于 <strong>RBAC0</strong> 模型，对角色增加了更多约束条件。</p><p><img loading="lazy" src="https://static.7wate.com/img/2022/08/30/adc688e2b7f77.png" alt="RBAC2" class="img_ev3q"></p><p>如<strong>角色互斥</strong>，比较经典的案例是财务系统中出纳不得兼管稽核，那么在赋予财务系统操作人员角色时，同一个操作员不能同时拥有出纳和稽核两个角色。</p><p>如<strong>角色数量限制</strong>，例如：一个角色专门为公司 CEO 创建的，最后发现公司有 10 个人拥有 CEO 角色，一个公司有10 个 CEO ？这就是对角色数量的限制，它指的是有多少用户能拥有这个角色。</p><p><strong>RBAC2</strong> 模型主要是为了增加角色赋予的限制条件，这也符合权限系统的目标：权责明确，系统使用安全、保密。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-rbac3模型">4. RBAC3模型<a class="hash-link" href="#4-rbac3模型" title="标题的直接链接">​</a></h3><p>同样是基于 <strong>RBAC0</strong> 模型，但是综合了 <strong>RBAC1</strong> 和 <strong>RBAC2</strong> 的所有特点</p><p>这里就不在多描述，读者返回去看 <strong>RBAC1</strong> 和 <strong>RBAC2</strong> 模型的描述即可。</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="rbac-权限管理的在实际系统中的应用">RBAC 权限管理的在实际系统中的应用<a class="hash-link" href="#rbac-权限管理的在实际系统中的应用" title="标题的直接链接">​</a></h2><p>RBAC 权限模型由三大部分构成，即<strong>用户管理</strong>、<strong>角色管理</strong>、<strong>权限管理</strong>。</p><p>用户管理按照企业架构或业务线架构来划分，这些结构本身比较清晰，扩展性和可读性都非常好。</p><p>角色管理一定要在深入理解业务逻辑后再来设计，一般使用各部门真实的角色作为基础，再根据业务逻辑进行扩展。</p><p>权限管理是前两种管理的再加固，做太细容易太碎片，做太粗又不够安全，这里我们需要根据经验和实际情况来设计。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-用户管理">1. 用户管理<a class="hash-link" href="#1-用户管理" title="标题的直接链接">​</a></h3><p>用户管理中的用户，是企业里每一位员工，他们本身就有自己的组织架构，我们可以直接使用企业部门架构或者业务线架构来作为线索，构建用户管理系统。</p><p><img loading="lazy" src="https://static.7wate.com/img/2022/08/30/887a6f017f7e3.png" alt="用户管理系统" class="img_ev3q"></p><p><strong>需要特殊注意</strong>：实际业务中的组织架构可能与企业部门架构、业务线架构不同，需要考虑数据共享机制，一般的做法为授权某个人、某个角色组共享某个组织层级的某个对象组数据。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-角色管理">2. 角色管理<a class="hash-link" href="#2-角色管理" title="标题的直接链接">​</a></h3><p>在设计系统角色时，我们应该深入理解公司架构、业务架构后，再根据需求设计角色及角色内的等级。</p><p>一般角色相对于用户来说是固定不变的，每个角色都有自己明确的权限和限制，这些权限在系统设计之处就确定了，之后也轻易不会再变动。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-自动获得基础角色">1. 自动获得基础角色<a class="hash-link" href="#1-自动获得基础角色" title="标题的直接链接">​</a></h4><p>当员工入职到某部门时，该名员工的账号应该自动被加入该部门对应的基础角色中，并拥有对应的基础权限。这种操作是为了保证系统安全的前提下，减少了管理员大量手动操作。使新入职员工能快速使用系统，提高工作效率。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-临时角色与失效时间">2. 临时角色与失效时间<a class="hash-link" href="#2-临时角色与失效时间" title="标题的直接链接">​</a></h4><p>公司业务有时需要外援来支持，他们并不属于公司员工，也只是在某个时段在公司做支持。此时我们需要设置临时角色，来应对这种可能跨多部门协作的临时员工。</p><p>如果公司安全级别较高，此类账号默认有固定失效时间，到达失效时间需再次审核才能重新开启。避免临时账号因为流程不完善，遗忘在系统中，引起安全隐患。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-虚拟角色">3. 虚拟角色<a class="hash-link" href="#3-虚拟角色" title="标题的直接链接">​</a></h4><p>部门角色中的等级，可以授权同等级的员工拥有相同的权限，但某些员工因工作原因，需要调用角色等级之外的权限，相同等级不同员工需要使用的权限还不相同。</p><p>这种超出角色等级又合理的权限授予，我们可以设置虚拟角色。这一虚拟角色可集成这一工作所需的所有权限，然后将它赋予具体的员工即可。这样即不用调整组织架构和对应的角色，也可以满足工作中特殊情况的权限需求。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-黑白名单">4. 黑白名单<a class="hash-link" href="#4-黑白名单" title="标题的直接链接">​</a></h4><p><strong>白名单</strong>：某些用户自身不拥有某部门的顶级角色，但处于业务需求，需要给他角色外的高级权限，那么我们可以设计限制范围的白名单，将需要的用户添加进去即可。</p><p>在安全流程中，我们仅需要对白名单设计安全流程，即可审核在白名单中的特殊用户，做到监控拥有特殊权限的用户，减少安全隐患。</p><p><strong>黑名单</strong>：比较常见的黑名单场景是某些犯了错误的员工，虽然在职，但已经不能给他们任何公司权限了。这种既不能取消角色关联，也不能完全停用账号的情况，可以设置黑名单，让此类用户可以登录账号，查看基本信息，但大多数关键权限已经被黑名单限制。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-权限管理">3. 权限管理<a class="hash-link" href="#3-权限管理" title="标题的直接链接">​</a></h3><p>权限管理一般从三个方面来做限制。<strong>页面/菜单权限</strong>，<strong>操作权限</strong>，<strong>数据权限</strong>。</p><p><img loading="lazy" src="https://static.7wate.com/img/2022/08/30/8ad6abcc85524.png" alt="权限管理系统" class="img_ev3q"></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-页面菜单权限">1. 页面/菜单权限<a class="hash-link" href="#1-页面菜单权限" title="标题的直接链接">​</a></h4><p>对于没有权限操作的用户，直接隐藏对应的页面入口或菜单选项。这种方法简单快捷直接，对于一些安全不太敏感的权限，使用这种方式非常高效。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-操作权限">2. 操作权限<a class="hash-link" href="#2-操作权限" title="标题的直接链接">​</a></h4><p>操作权限通常是指对同一组数据，不同的用户是否可以增删改查。对某些用户来说是只读浏览数据，对某些用户来说是可编辑的数据。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-数据权限">3. 数据权限<a class="hash-link" href="#3-数据权限" title="标题的直接链接">​</a></h4><p>对于安全需求高的权限管理，仅从前端限制隐藏菜单，隐藏编辑按钮是不够的，还需要在数接口上做限制。如果用户试图通过非法手段编辑不属于自己权限下的数据，服务器端会识别、记录并限制访问。</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-数据权限如何管控">4. 数据权限如何管控<a class="hash-link" href="#4-数据权限如何管控" title="标题的直接链接">​</a></h4><p>数据权限可以分为行权限和列权限。行权限控制：看多少条数据。列权限控制：看一条数据的多少个字段。</p><p>简单系统中可以通过组织架构来管控行权限，按照角色来配置列权限，但是遇到复杂情况，组织架构是承载不了复杂行权限管控，角色也更不能承载列的特殊化展示。</p><p>目前行业的做法是提供行列级数据权规则配置，把规则当成类似权限点配置赋予某个角色或者某个用户。</p><p><img loading="lazy" src="https://static.7wate.com/img/2022/08/08/900928128de9c.png" alt="新建规则" class="img_ev3q"></p><p><img loading="lazy" src="https://static.7wate.com/img/2022/08/08/d81016b4c7467.png" alt="角色管理" class="img_ev3q"></p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="用户管理系统权限设计中的更多实践细节">用户管理系统权限设计中的更多实践细节<a class="hash-link" href="#用户管理系统权限设计中的更多实践细节" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-超级管理员">1. 超级管理员<a class="hash-link" href="#1-超级管理员" title="标题的直接链接">​</a></h3><p>超级管理员是用来启动系统，配置系统的账号。这个账号应该在配置好系统，创建管理员之后被隐藏起来。超级管理员账号拥有系统中全部权限，可穿梭查看各部门数据，如果使用不恰当，是系统管理的安全隐患。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-互斥角色如何处理">2. 互斥角色如何处理<a class="hash-link" href="#2-互斥角色如何处理" title="标题的直接链接">​</a></h3><p>当用户已经有用的角色和即将添加的角色互相互斥时，应该在添加新角色时，提示管理员因角色互斥的原因，无法进行新角色添加。如需添加，要先撤销掉前一个角色，再添加新角色。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="3-用户管理权限系统设计一定要简单清晰">3. 用户管理权限系统设计一定要简单清晰<a class="hash-link" href="#3-用户管理权限系统设计一定要简单清晰" title="标题的直接链接">​</a></h3><p>在设计权限系统之处，一定要理清思路，一切从简，能不增加的多余角色和权限逻辑，就一定不要增加。因为随着公司业务的扩大，权限和角色也会随之增多，如果初期设计思路不严谨，那么权限系统会随着业务的扩大而无限混乱下去，此时再来整理权限，已经太晚了。所以初期设计就一定要条理清晰，简单明了，能避免后续非常多不必要的麻烦。</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="4-无权提示页">4. 无权提示页<a class="hash-link" href="#4-无权提示页" title="标题的直接链接">​</a></h3><p>有时员工 A 会直接给员工 B 分享他当下正在操作的页面，但有可能员工 B 无权查看。此时我们应该在这里考虑添加「无权提示页」，避免粗暴的 404 页面让员工 B 以为是系统出错了。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/devsec/category/权限设计方案"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">权限设计方案</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/devsec/category/鉴权解决方案"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">鉴权解决方案</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#acl-模型访问控制列表" class="table-of-contents__link toc-highlight">ACL 模型：访问控制列表</a></li><li><a href="#dac-模型自主访问控制" class="table-of-contents__link toc-highlight">DAC 模型：自主访问控制</a></li><li><a href="#mac-模型强制访问控制" class="table-of-contents__link toc-highlight">MAC 模型：强制访问控制</a></li><li><a href="#abac-模型基于属性的访问控制" class="table-of-contents__link toc-highlight">ABAC 模型：基于属性的访问控制</a></li><li><a href="#rbac-基于角色的权限访问控制" class="table-of-contents__link toc-highlight">RBAC 基于角色的权限访问控制</a></li><li><a href="#rbac的深度拓展" class="table-of-contents__link toc-highlight">RBAC的深度拓展</a><ul><li><a href="#1-rbac0-模型" class="table-of-contents__link toc-highlight">1. RBAC0 模型</a></li><li><a href="#2-rbac1-模型" class="table-of-contents__link toc-highlight">2. RBAC1 模型</a></li><li><a href="#3-rbac2-模型" class="table-of-contents__link toc-highlight">3. RBAC2 模型</a></li><li><a href="#4-rbac3模型" class="table-of-contents__link toc-highlight">4. RBAC3模型</a></li></ul></li><li><a href="#rbac-权限管理的在实际系统中的应用" class="table-of-contents__link toc-highlight">RBAC 权限管理的在实际系统中的应用</a><ul><li><a href="#1-用户管理" class="table-of-contents__link toc-highlight">1. 用户管理</a></li><li><a href="#2-角色管理" class="table-of-contents__link toc-highlight">2. 角色管理</a></li><li><a href="#3-权限管理" class="table-of-contents__link toc-highlight">3. 权限管理</a></li></ul></li><li><a href="#用户管理系统权限设计中的更多实践细节" class="table-of-contents__link toc-highlight">用户管理系统权限设计中的更多实践细节</a><ul><li><a href="#1-超级管理员" class="table-of-contents__link toc-highlight">1. 超级管理员</a></li><li><a href="#2-互斥角色如何处理" class="table-of-contents__link toc-highlight">2. 互斥角色如何处理</a></li><li><a href="#3-用户管理权限系统设计一定要简单清晰" class="table-of-contents__link toc-highlight">3. 用户管理权限系统设计一定要简单清晰</a></li><li><a href="#4-无权提示页" class="table-of-contents__link toc-highlight">4. 无权提示页</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 ❤️ <a href="https://blog.w2aa.ga/" target="_blank" rel="noopener noreferrer">时光's Blog</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bc9acaa0.js"></script>
<script src="/assets/js/main.a7f1e373.js"></script>
</body>
</html>