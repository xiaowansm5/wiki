<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-org docs-doc-id-Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Java å®‰å…¨æŒ‡å—">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Java å®‰å…¨æŒ‡å— | æ—¶å…‰wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.w2aa.ml/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Java å®‰å…¨æŒ‡å—"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="keywords" content="æ—¶å…‰, wiki, blog, c, c++, java, python, linux"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-org-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-org-current"><meta data-rh="true" property="og:title" content="Java å®‰å…¨æŒ‡å— | æ—¶å…‰wiki"><meta data-rh="true" name="description" content="å®‰å“ç±»"><meta data-rh="true" property="og:description" content="å®‰å“ç±»"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wiki.w2aa.ml/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Java å®‰å…¨æŒ‡å—"><link data-rh="true" rel="alternate" href="https://wiki.w2aa.ml/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Java å®‰å…¨æŒ‡å—" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://wiki.w2aa.ml/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Java å®‰å…¨æŒ‡å—" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://8W3YJXJGF2-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="æ—¶å…‰`s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="æ—¶å…‰`s Blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="æ—¶å…‰`s Blog JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-MHMEL0F832","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MHMEL0F832"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MHMEL0F832",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="æ—¶å…‰wiki" href="/opensearch.xml">


















<script async defer="defer" data-website-id="/" src="/"></script><link rel="stylesheet" href="/assets/css/styles.7bc7ae63.css">
<link rel="preload" href="/assets/js/runtime~main.fa47d194.js" as="script">
<link rel="preload" href="/assets/js/main.5e182ebc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">ğŸ“š æ—¶å…‰&#x27;s Wiki</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog">ğŸ‘¨ğŸ»â€ğŸŒ¾ åšå®¢</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸ‘¨ğŸ»â€ğŸ“ ç»´åŸº</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/getting-started">åŸºç¡€å…¥é—¨</a></li><li><a class="dropdown__link" href="/programming-language">ç¨‹åºè®¾è®¡è¯­è¨€</a></li><li><a class="dropdown__link" href="/structures-algorithms">æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li><a class="dropdown__link" href="/computer-composition">è®¡ç®—æœºç»„æˆ</a></li><li><a class="dropdown__link" href="/computer-network">è®¡ç®—æœºç½‘ç»œ</a></li><li><a class="dropdown__link" href="/operating-system">æ“ä½œç³»ç»Ÿ</a></li><li><a class="dropdown__link" href="/database-system">æ•°æ®åº“ç³»ç»Ÿ</a></li><li><a class="dropdown__link" href="/computer-security">è®¡ç®—æœºç³»ç»Ÿå®‰å…¨</a></li><li><a class="dropdown__link" href="/software-engineering">è½¯ä»¶å·¥ç¨‹</a></li><li><a class="dropdown__link" href="/compilation-principle">ç¼–è¯‘åŸç†</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸ‘¨â€ğŸ’» èŒä¸š</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/roadmap">æ±‚èŒä¹‹è·¯</a></li><li><a class="dropdown__link" href="/devops">è¿ç»´å¼€å‘å·¥ç¨‹å¸ˆ</a></li><li><a class="dropdown__link" href="/devsec">ä¿¡æ¯å®‰å…¨å·¥ç¨‹å¸ˆ</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸ“ ç½‘ç›˜</a><ul class="dropdown__menu"><li><a href="https://p.w2nn.ml/" target="_blank" rel="noopener noreferrer" class="dropdown__link">å›ºä»¶ä»“åº“<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://pan.w2nn.ml/zh-CN/" target="_blank" rel="noopener noreferrer" class="dropdown__link">å›ºä»¶ä»“åº“[å¤‡ç”¨ä»“åº“]<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://p.wwang.pw" target="_blank" rel="noopener noreferrer" class="dropdown__link">èµ„æºåº“<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸ§° å·¥å…·</a><ul class="dropdown__menu"><li><a href="https://sub.w2aa.ga/" target="_blank" rel="noopener noreferrer" class="dropdown__link">è®¢é˜…è½¬æ¢<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://s.w2aa.ga/" target="_blank" rel="noopener noreferrer" class="dropdown__link">æ—¶å…‰ã®çŸ­é“¾<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://imgapi.xiaowansm.repl.co" target="_blank" rel="noopener noreferrer" class="dropdown__link">éšæœºå›¾api<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/org">è‡ªç”±ç¤¾åŒº</a></li><li><a class="dropdown__link" href="/com">ç°ä»£ä¼ä¸š</a></li><li><a class="dropdown__link" href="/gov">å›½å®¶æ”¿åºœ</a></li></ul></div><a class="navbar__item navbar__link" href="/life">ğŸš´ğŸ»â€â™€ï¸ ç”Ÿæ´»</a><a class="navbar__item navbar__link" href="/journal">ğŸ“½ï¸ æ—¥å¿—</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><b>ğŸ“š æ—¶å…‰&#x27;s Wiki</b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/org/">è‡ªç”±ç¤¾åŒº</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/org/Google/è°·æ­Œå¼€æºé¡¹ç›®é£æ ¼æŒ‡å—">Google</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/">Tencent</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/">è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—</a><button aria-label="æ‰“å¼€/æ”¶èµ·ä¾§è¾¹æ èœå•ã€Œè…¾è®¯ä»£ç å®‰å…¨æŒ‡å—ã€" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/C,C++ å®‰å…¨æŒ‡å—">C,C++ å®‰å…¨æŒ‡å—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/JavaScript å®‰å…¨æŒ‡å—">JavaScript å®‰å…¨æŒ‡å—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Go å®‰å…¨æŒ‡å—">Go å®‰å…¨æŒ‡å—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Java å®‰å…¨æŒ‡å—">Java å®‰å…¨æŒ‡å—</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Python å®‰å…¨æŒ‡å—">Python å®‰å…¨æŒ‡å—</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><header><h1>Java å®‰å…¨æŒ‡å—</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="å®‰å“ç±»">å®‰å“ç±»<a class="hash-link" href="#å®‰å“ç±»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-ä»£ç å®ç°">1. ä»£ç å®ç°<a class="hash-link" href="#1-ä»£ç å®ç°" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="11-å¼‚å¸¸æ•è·å¤„ç†">1.1 å¼‚å¸¸æ•è·å¤„ç†<a class="hash-link" href="#11-å¼‚å¸¸æ•è·å¤„ç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="111-åºåˆ—åŒ–å¼‚å¸¸æ•è·">1.1.1 åºåˆ—åŒ–å¼‚å¸¸æ•è·<a class="hash-link" href="#111-åºåˆ—åŒ–å¼‚å¸¸æ•è·" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¯¹äºé€šè¿‡å¯¼å‡ºç»„ä»¶ intent ä¼ é€’çš„åºåˆ—åŒ–å¯¹è±¡ï¼Œå¿…é¡»è¿›è¡Œ try...catch å¤„ç†ï¼Œä»¥é¿å…æ•°æ®éæ³•å¯¼è‡´åº”ç”¨å´©æºƒã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Intent</span><span class="token plain"> mIntent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getIntent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">//String msg = intent.getStringExtra(&quot;data&quot;); </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Person</span><span class="token plain"> mPerson </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">mIntent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSerializableExtra</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ObjectDemo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SER_KEY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">//textView.setText(msg); </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ClassNotFoundException</span><span class="token plain"> exp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="112-nullpointerexception-å¼‚å¸¸æ•è·">1.1.2 NullPointerException å¼‚å¸¸æ•è·<a class="hash-link" href="#112-nullpointerexception-å¼‚å¸¸æ•è·" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¯¹äºé€šè¿‡ intent getAction æ–¹æ³•è·å–æ•°æ®æ—¶ï¼Œå¿…é¡»è¿›è¡Œ try...catch å¤„ç†ï¼Œä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸å¯¼è‡´åº”ç”¨å´©æºƒã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Intent</span><span class="token plain"> mIntent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getIntent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> mIntent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAction</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;StartNewWorld&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">NullPointerException</span><span class="token plain"> exp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="113-classcastexception-å¼‚å¸¸æ•è·">1.1.3 ClassCastException å¼‚å¸¸æ•è·<a class="hash-link" href="#113-classcastexception-å¼‚å¸¸æ•è·" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¯¹äºé€šè¿‡ intent getSerializableExtra æ–¹æ³•è·å–æ•°æ®æ—¶ï¼Œå¿…é¡»è¿›è¡Œ try...catch å¤„ç†ï¼Œä»¥é¿å…ç±»å‹è½¬æ¢å¼‚å¸¸å¯¼è‡´åº”ç”¨å´©æºƒã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Intent</span><span class="token plain"> mIntent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getIntent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Person</span><span class="token plain"> mPerson </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Person</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">mIntent</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSerializableExtra</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ObjectDemo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SER_KEY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ClassCastException</span><span class="token plain"> exp</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="114--classnotfoundexception-å¼‚å¸¸æ•è·">1.1.4  ClassNotFoundException å¼‚å¸¸æ•è·<a class="hash-link" href="#114--classnotfoundexception-å¼‚å¸¸æ•è·" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>åŒ 1.1.3</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="12-æ•°æ®æ³„éœ²">1.2 æ•°æ®æ³„éœ²<a class="hash-link" href="#12-æ•°æ®æ³„éœ²" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="121-logcat-è¾“å‡ºé™åˆ¶">1.2.1 logcat è¾“å‡ºé™åˆ¶<a class="hash-link" href="#121-logcat-è¾“å‡ºé™åˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>release ç‰ˆæœ¬ç¦æ­¢åœ¨ logcat è¾“å‡ºä¿¡æ¯ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DEBUG</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;debug_version&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">DEBUG</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;debug_version&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Log</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">d</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;writelog&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;start activity&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13-webview-ç»„ä»¶å®‰å…¨">1.3 webview ç»„ä»¶å®‰å…¨<a class="hash-link" href="#13-webview-ç»„ä»¶å®‰å…¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="131-addjavascriptinterface-æ–¹æ³•è°ƒç”¨">1.3.1 addJavaScriptInterface æ–¹æ³•è°ƒç”¨<a class="hash-link" href="#131-addjavascriptinterface-æ–¹æ³•è°ƒç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¯¹äºè®¾ç½® minsdk &lt;= 18 çš„åº”ç”¨ï¼Œç¦æ­¢è°ƒç”¨ addJavaScriptInterface æ–¹æ³•ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WebView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Build</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">VERSION</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SDK_INT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            mWebView</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addJavascriptInterface</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name namespace" style="opacity:0.7">wPayActivity</span><span class="token class-name namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token class-name">InJavaScriptLocalObj</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;local_obj&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="132-setjavascriptenabled-æ–¹æ³•è°ƒç”¨">1.3.2 setJavaScriptEnabled æ–¹æ³•è°ƒç”¨<a class="hash-link" href="#132-setjavascriptenabled-æ–¹æ³•è°ƒç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¦‚éå¿…è¦ï¼ŒsetJavaScriptEnabled åº”è®¾ç½®ä¸º false ã€‚åŠ è½½æœ¬åœ° html ï¼Œåº”æ ¡éªŒ html é¡µé¢å®Œæ•´æ€§ï¼Œä»¥é¿å… xss æ”»å‡»ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WebView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSettings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setJavaScriptEnabled</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="133-setallowfileaccess-æ–¹æ³•è°ƒç”¨">1.3.3 setAllowFileAccess æ–¹æ³•è°ƒç”¨<a class="hash-link" href="#133-setallowfileaccess-æ–¹æ³•è°ƒç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å»ºè®®ç¦æ­¢ä½¿ç”¨ File åŸŸåè®®ï¼Œä»¥é¿å…è¿‡æ»¤ä¸å½“å¯¼è‡´æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WebView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSettings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setAllowFileAccess</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="134-setsavepassword-æ–¹æ³•è°ƒç”¨">1.3.4 setSavePassword æ–¹æ³•è°ƒç”¨<a class="hash-link" href="#134-setsavepassword-æ–¹æ³•è°ƒç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å»ºè®® setSavePassword çš„è®¾ç½®ä¸º false ï¼Œé¿å…æ˜æ–‡ä¿å­˜ç½‘ç«™å¯†ç ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WebView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSettings</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setSavePassword</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="135-onreceivedsslerror-æ–¹æ³•è°ƒç”¨">1.3.5 onReceivedSslError æ–¹æ³•è°ƒç”¨<a class="hash-link" href="#135-onreceivedsslerror-æ–¹æ³•è°ƒç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>webview ç»„ä»¶åŠ è½½ç½‘é¡µå‘ç”Ÿè¯ä¹¦è®¤è¯é”™è¯¯æ—¶ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ handler.proceed() å¿½ç•¥é”™è¯¯ï¼Œåº”å½“å¤„ç†å½“å‰åœºæ™¯æ˜¯å¦ç¬¦åˆä¸šåŠ¡é¢„æœŸï¼Œä»¥é¿å…ä¸­é—´äººæ”»å‡»åŠ«æŒã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WebView</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mWebView</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setWebViewClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">WebViewClient</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onReceivedSslError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">WebView</span><span class="token plain"> view</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">SslErrorHandler</span><span class="token plain"> handler</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">SslError</span><span class="token plain"> error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// must check error </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">check_error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                handler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">proceed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14-ä¼ è¾“å®‰å…¨">1.4 ä¼ è¾“å®‰å…¨<a class="hash-link" href="#14-ä¼ è¾“å®‰å…¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="141-è‡ªå®šä¹‰-hostnameverifier-ç±»">1.4.1 è‡ªå®šä¹‰ HostnameVerifier ç±»<a class="hash-link" href="#141-è‡ªå®šä¹‰-hostnameverifier-ç±»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>è‡ªå®šä¹‰ HostnameVerifier ç±»åï¼Œå¿…é¡»å®ç° verify æ–¹æ³•æ ¡éªŒåŸŸåï¼Œä»¥é¿å…ä¸­é—´äººæ”»å‡»åŠ«æŒã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">HostnameVerifier</span><span class="token plain"> hnv </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HostnameVerifier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token annotation punctuation" style="color:#393A34">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">verify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> hostname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">SSLSession</span><span class="token plain"> session</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// must to do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                isValid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkHostName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hostname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> isValid</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="142-è‡ªå®šä¹‰-x509trustmanager-ç±»">1.4.2 è‡ªå®šä¹‰ X509TrustManager ç±»<a class="hash-link" href="#142-è‡ªå®šä¹‰-x509trustmanager-ç±»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>è‡ªå®šä¹‰ X509TrustManager ç±»åï¼Œå¿…é¡»å®ç° checkServerTrusted æ–¹æ³•æ ¡éªŒæœåŠ¡å™¨è¯ä¹¦ï¼Œä»¥é¿å…ä¸­é—´äººæ”»å‡»åŠ«æŒã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">TrustManager</span><span class="token plain"> tm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">X509TrustManager</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">checkServerTrusted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">X509Certificate</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> chain</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> authType</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">CertificateException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// must to do</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token function" style="color:#d73a49">check_server_valid</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="143-sethostnameverifier-æ–¹æ³•è°ƒç”¨">1.4.3 setHostnameVerifier æ–¹æ³•è°ƒç”¨<a class="hash-link" href="#143-sethostnameverifier-æ–¹æ³•è°ƒç”¨" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>ç¦æ­¢è°ƒç”¨ setHostnameVerifier æ–¹æ³•è®¾ç½® ALLOW_ALL_HOSTNAME_VERIFIER å±æ€§ï¼Œä»¥é¿å…ä¸­é—´äººæ”»å‡»åŠ«æŒã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MainActivity</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Activity</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">protected</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Bundle</span><span class="token plain"> savedInstanceState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SchemeRegistry</span><span class="token plain"> schemeregistry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SchemeRegistry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SSLSocketFactory</span><span class="token plain"> sslsocketfactory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">SSLSocketFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSocketFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// set STRICT_HOSTNAME_VERIFIER</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sslsocketfactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setHostnameVerifier</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SSLSocketFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">STRICT_HOSTNAME_VERIFIER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// ......</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-é…ç½®ç¯å¢ƒ">2. é…ç½®&amp;ç¯å¢ƒ<a class="hash-link" href="#2-é…ç½®ç¯å¢ƒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="21-androidmanifestxml-é…ç½®">2.1 AndroidManifest.xml é…ç½®<a class="hash-link" href="#21-androidmanifestxml-é…ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="211-permissiongroup-å±æ€§è®¾ç½®">2.1.1 PermissionGroup å±æ€§è®¾ç½®<a class="hash-link" href="#211-permissiongroup-å±æ€§è®¾ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>ç¦æ­¢è®¾ç½® PermissionGroup å±æ€§ä¸ºç©ºã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="212-protectionlevel-å±æ€§è®¾ç½®">2.1.2 protectionLevel å±æ€§è®¾ç½®<a class="hash-link" href="#212-protectionlevel-å±æ€§è®¾ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¯¹äºè‡ªå®šä¹‰æƒé™çš„ protectionLevel å±æ€§è®¾ç½®ï¼Œå»ºè®®è®¾ç½®ä¸º signature æˆ– signatureOrSystemã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="213-å»ºè®®shareduserid-æƒé™è®¾ç½®">2.1.3 ã€å»ºè®®ã€‘sharedUserId æƒé™è®¾ç½®<a class="hash-link" href="#213-å»ºè®®shareduserid-æƒé™è®¾ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>æœ€å°èŒƒå›´å’Œæœ€å°æƒé™ä½¿ç”¨ sharedUserId è®¾ç½®ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="214-å»ºè®®allowbackup-å¤‡ä»½è®¾ç½®">2.1.4 ã€å»ºè®®ã€‘allowBackup å¤‡ä»½è®¾ç½®<a class="hash-link" href="#214-å»ºè®®allowbackup-å¤‡ä»½è®¾ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¦‚éäº§å“åŠŸèƒ½éœ€è¦ï¼Œå»ºè®®è®¾ç½® allowBackup ä¸º falseã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">application android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">allowBackup</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">application</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="215-debuggable-è°ƒè¯•è®¾ç½®">2.1.5 debuggable è°ƒè¯•è®¾ç½®<a class="hash-link" href="#215-debuggable-è°ƒè¯•è®¾ç½®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>release ç‰ˆæœ¬ç¦æ­¢è®¾ç½® debuggable ä¸º trueã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">application android</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">debuggable</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">application</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="åå°ç±»">åå°ç±»<a class="hash-link" href="#åå°ç±»" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-ä»£ç å®ç°-1">1. ä»£ç å®ç°<a class="hash-link" href="#1-ä»£ç å®ç°-1" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="11-æ•°æ®æŒä¹…åŒ–">1.1 æ•°æ®æŒä¹…åŒ–<a class="hash-link" href="#11-æ•°æ®æŒä¹…åŒ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="111-sqlè¯­å¥é»˜è®¤ä½¿ç”¨é¢„ç¼–è¯‘å¹¶ç»‘å®šå˜é‡">1.1.1 SQLè¯­å¥é»˜è®¤ä½¿ç”¨é¢„ç¼–è¯‘å¹¶ç»‘å®šå˜é‡<a class="hash-link" href="#111-sqlè¯­å¥é»˜è®¤ä½¿ç”¨é¢„ç¼–è¯‘å¹¶ç»‘å®šå˜é‡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>Webåå°ç³»ç»Ÿåº”é»˜è®¤ä½¿ç”¨é¢„ç¼–è¯‘ç»‘å®šå˜é‡çš„å½¢å¼åˆ›å»ºsqlè¯­å¥ï¼Œä¿æŒæŸ¥è¯¢è¯­å¥å’Œæ•°æ®ç›¸åˆ†ç¦»ã€‚ä»¥ä»æœ¬è´¨ä¸Šé¿å…SQLæ³¨å…¥é£é™©ã€‚</p><p>å¦‚ä½¿ç”¨Mybatisä½œä¸ºæŒä¹…å±‚æ¡†æ¶ï¼Œåº”é€šè¿‡<!-- -->#<!-- -->{}è¯­æ³•è¿›è¡Œå‚æ•°ç»‘å®šï¼ŒMyBatis ä¼šåˆ›å»º <code>PreparedStatement</code> å‚æ•°å ä½ç¬¦ï¼Œå¹¶é€šè¿‡å ä½ç¬¦å®‰å…¨åœ°è®¾ç½®å‚æ•°ã€‚</p><p>ç¤ºä¾‹ï¼šJDBC</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> custname </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">String</span><span class="token plain"> query </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;SELECT * FROM user_data WHERE user_name = ? &quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">PreparedStatement</span><span class="token plain"> pstmt </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> connection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">prepareStatement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> query </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pstmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> custname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ResultSet</span><span class="token plain"> results </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> pstmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">executeQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Mybatis</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">select id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;queryRuleIdByApplicationId&quot;</span><span class="token plain"> parameterType</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;java.lang.String&quot;</span><span class="token plain"> resultType</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;java.lang.String&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      select rule_id from scan_rule_sqlmap_tab where application_id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">#</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">applicationId</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">select</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åº”é¿å…å¤–éƒ¨è¾“å…¥æœªç»è¿‡æ»¤ç›´æ¥æ‹¼æ¥åˆ°SQLè¯­å¥ä¸­ï¼Œæˆ–è€…é€šè¿‡Mybatisä¸­çš„${}ä¼ å…¥SQLè¯­å¥ï¼ˆå³ä½¿ä½¿ç”¨PreparedStatementï¼ŒSQLè¯­å¥ç›´æ¥æ‹¼æ¥å¤–éƒ¨è¾“å…¥ä¹ŸåŒæ ·æœ‰é£é™©ã€‚ä¾‹å¦‚Mybatisä¸­éƒ¨åˆ†å‚æ•°é€šè¿‡${}ä¼ å…¥SQLè¯­å¥åå®é™…æ‰§è¡Œæ—¶è°ƒç”¨çš„æ˜¯PreparedStatement.execute()ï¼ŒåŒæ ·å­˜åœ¨æ³¨å…¥é£é™©ï¼‰ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="112-ç™½åå•è¿‡æ»¤">1.1.2 ç™½åå•è¿‡æ»¤<a class="hash-link" href="#112-ç™½åå•è¿‡æ»¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¯¹äºè¡¨åã€åˆ—åç­‰æ— æ³•è¿›è¡Œé¢„ç¼–è¯‘çš„åœºæ™¯ï¼Œæ¯”å¦‚å¤–éƒ¨æ•°æ®æ‹¼æ¥åˆ°order by, group byè¯­å¥ä¸­ï¼Œéœ€é€šè¿‡ç™½åå•çš„å½¢å¼å¯¹æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œä¾‹å¦‚åˆ¤æ–­ä¼ å…¥åˆ—åæ˜¯å¦å­˜åœ¨ã€å‡é™åºä»…å…è®¸è¾“å…¥â€œASCâ€å’Œâ€œDESCâ€ã€è¡¨ååˆ—åä»…å…è®¸è¾“å…¥å­—ç¬¦ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç­‰ã€‚å‚è€ƒç¤ºä¾‹ï¼š</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">someMethod</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> sortOrder</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token class-name">SQLquery</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;some SQL ... order by Salary &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sortOrder </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ASC&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DESC&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="12-æ–‡ä»¶æ“ä½œ">1.2 æ–‡ä»¶æ“ä½œ<a class="hash-link" href="#12-æ–‡ä»¶æ“ä½œ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="121-æ–‡ä»¶ç±»å‹é™åˆ¶">1.2.1 æ–‡ä»¶ç±»å‹é™åˆ¶<a class="hash-link" href="#121-æ–‡ä»¶ç±»å‹é™åˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>é¡»åœ¨æœåŠ¡å™¨ç«¯é‡‡ç”¨ç™½åå•æ–¹å¼å¯¹ä¸Šä¼ æˆ–ä¸‹è½½çš„æ–‡ä»¶ç±»å‹ã€å¤§å°è¿›è¡Œä¸¥æ ¼çš„é™åˆ¶ã€‚ä»…å…è®¸ä¸šåŠ¡æ‰€éœ€æ–‡ä»¶ç±»å‹ä¸Šä¼ ï¼Œé¿å…ä¸Šä¼ .jspã€.jspxã€.classã€.javaç­‰å¯æ‰§è¡Œæ–‡ä»¶ã€‚å‚è€ƒç¤ºä¾‹ï¼š</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token class-name">String</span><span class="token plain"> file_name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getOriginalFilename</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> parts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file_name</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">split</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;\\.&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> suffix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parts</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">parts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">length </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">suffix</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;jpeg&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                suffix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.jpeg&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;jpg&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                suffix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.jpg&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bmp&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                suffix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.bmp&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;png&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                suffix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.png&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">default</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">//handle error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;error&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="122-ç¦æ­¢å¤–éƒ¨æ–‡ä»¶å­˜å‚¨äºå¯æ‰§è¡Œç›®å½•">1.2.2 ç¦æ­¢å¤–éƒ¨æ–‡ä»¶å­˜å‚¨äºå¯æ‰§è¡Œç›®å½•<a class="hash-link" href="#122-ç¦æ­¢å¤–éƒ¨æ–‡ä»¶å­˜å‚¨äºå¯æ‰§è¡Œç›®å½•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>ç¦æ­¢å¤–éƒ¨æ–‡ä»¶å­˜å‚¨äºWEBå®¹å™¨çš„å¯æ‰§è¡Œç›®å½•ï¼ˆappBaseï¼‰ã€‚å»ºè®®ä¿å­˜åœ¨ä¸“é—¨çš„æ–‡ä»¶æœåŠ¡å™¨ä¸­ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="123å»ºè®®é¿å…è·¯å¾„æ‹¼æ¥">1.2.3ã€å»ºè®®ã€‘é¿å…è·¯å¾„æ‹¼æ¥<a class="hash-link" href="#123å»ºè®®é¿å…è·¯å¾„æ‹¼æ¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>æ–‡ä»¶ç›®å½•é¿å…å¤–éƒ¨å‚æ•°æ‹¼æ¥ã€‚ä¿å­˜æ–‡ä»¶ç›®å½•å»ºè®®åå°å†™æ­»å¹¶å¯¹æ–‡ä»¶åè¿›è¡Œæ ¡éªŒï¼ˆå­—ç¬¦ç±»å‹ã€é•¿åº¦ï¼‰ã€‚å»ºè®®æ–‡ä»¶ä¿å­˜æ—¶ï¼Œå°†æ–‡ä»¶åæ›¿æ¢ä¸ºéšæœºå­—ç¬¦ä¸²ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="124-é¿å…è·¯å¾„ç©¿è¶Š">1.2.4 é¿å…è·¯å¾„ç©¿è¶Š<a class="hash-link" href="#124-é¿å…è·¯å¾„ç©¿è¶Š" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¦‚å› ä¸šåŠ¡éœ€è¦ä¸èƒ½æ»¡è¶³1.2.3çš„è¦æ±‚ï¼Œæ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶å‘½ä¸­æ‹¼æ¥äº†ä¸å¯è¡Œæ•°æ®ï¼Œéœ€åˆ¤æ–­è¯·æ±‚æ–‡ä»¶åå’Œæ–‡ä»¶è·¯å¾„å‚æ•°ä¸­æ˜¯å¦å­˜åœ¨../æˆ–..<!-- -->\<!-- -->(ä»…windows)ï¼Œ å¦‚å­˜åœ¨åº”åˆ¤å®šè·¯å¾„éæ³•å¹¶æ‹’ç»è¯·æ±‚ã€‚  </p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="13-ç½‘ç»œè®¿é—®">1.3 ç½‘ç»œè®¿é—®<a class="hash-link" href="#13-ç½‘ç»œè®¿é—®" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="131-é¿å…ç›´æ¥è®¿é—®ä¸å¯ä¿¡åœ°å€">1.3.1 é¿å…ç›´æ¥è®¿é—®ä¸å¯ä¿¡åœ°å€<a class="hash-link" href="#131-é¿å…ç›´æ¥è®¿é—®ä¸å¯ä¿¡åœ°å€" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>æœåŠ¡å™¨è®¿é—®ä¸å¯ä¿¡åœ°å€æ—¶ï¼Œç¦æ­¢è®¿é—®ç§æœ‰åœ°å€æ®µåŠå†…ç½‘åŸŸåã€‚</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// ä»¥RFCå®šä¹‰çš„ä¸“æœ‰ç½‘ç»œä¸ºä¾‹ï¼Œå¦‚æœ‰è‡ªå®šä¹‰ç§æœ‰ç½‘æ®µäº¦åº”åŠ å…¥ç¦æ­¢è®¿é—®åˆ—è¡¨ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10.0.0.0/8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">172.16.0.0/12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.0.0/16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">127.0.0.0/8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å»ºè®®é€šè¿‡URLè§£æå‡½æ•°è¿›è¡Œè§£æï¼Œè·å–hostæˆ–è€…domainåé€šè¿‡DNSè·å–å…¶IPï¼Œç„¶åå’Œå†…ç½‘åœ°å€è¿›è¡Œæ¯”è¾ƒã€‚</p><p>å¯¹å·²æ ¡éªŒé€šè¿‡åœ°å€è¿›è¡Œè®¿é—®æ—¶ï¼Œåº”å…³é—­è·Ÿè¿›è·³è½¬åŠŸèƒ½ã€‚</p><p>å‚è€ƒç¤ºä¾‹ï¼š</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">     httpConnection </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">HttpURLConnection</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token class-name">Url</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">openConnection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     httpConnection</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFollowRedirects</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="14-xmlè¯»å†™">1.4 XMLè¯»å†™<a class="hash-link" href="#14-xmlè¯»å†™" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="141-xmlè§£æå™¨å…³é—­dtdè§£æ">1.4.1 XMLè§£æå™¨å…³é—­DTDè§£æ<a class="hash-link" href="#141-xmlè§£æå™¨å…³é—­dtdè§£æ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>è¯»å–å¤–éƒ¨ä¼ å…¥XMLæ–‡ä»¶æ—¶ï¼ŒXMLè§£æå™¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­è®¾ç½®å…³é—­DTDè§£æã€‚</p><p>å‚è€ƒç¤ºä¾‹ï¼š</p><p>javax.xml.parsers.DocumentBuilderFactory</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">DocumentBuilderFactory</span><span class="token plain"> dbf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">DocumentBuilderFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">newInstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dbf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dbf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://xml.org/sax/features/external-general-entities&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dbf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://xml.org/sax/features/external-parameter-entities&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dbf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dbf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setXIncludeAware</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dbf</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setExpandEntityReferences</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â€¦â€¦</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>org.dom4j.io.SAXReader</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">saxReader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">saxReader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://xml.org/sax/features/external-general-entities&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">saxReader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://xml.org/sax/features/external-parameter-entities&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>org.jdom2.input.SAXBuilder</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">SAXBuilder</span><span class="token plain"> builder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SAXBuilder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://xml.org/sax/features/external-general-entities&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://xml.org/sax/features/external-parameter-entities&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">Document</span><span class="token plain"> doc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> builder</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">build</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">File</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fileName</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>org.xml.sax.XMLReader</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">XMLReader</span><span class="token plain"> reader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">XMLReaderFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createXMLReader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://xml.org/sax/features/external-general-entities&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setFeature</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://xml.org/sax/features/external-parameter-entities&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="15-å“åº”è¾“å‡º">1.5 å“åº”è¾“å‡º<a class="hash-link" href="#15-å“åº”è¾“å‡º" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="151-è®¾ç½®æ­£ç¡®çš„httpå“åº”åŒ…ç±»å‹">1.5.1 è®¾ç½®æ­£ç¡®çš„HTTPå“åº”åŒ…ç±»å‹<a class="hash-link" href="#151-è®¾ç½®æ­£ç¡®çš„httpå“åº”åŒ…ç±»å‹" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å“åº”åŒ…çš„HTTPå¤´â€œContent-Typeâ€å¿…é¡»æ­£ç¡®é…ç½®å“åº”åŒ…çš„ç±»å‹ï¼Œç¦æ­¢éHTMLç±»å‹çš„å“åº”åŒ…è®¾ç½®ä¸ºâ€œtext/htmlâ€ã€‚æ­¤ä¸¾ä¼šä½¿æµè§ˆå™¨åœ¨ç›´æ¥è®¿é—®é“¾æ¥æ—¶ï¼Œå°†éHTMLæ ¼å¼çš„è¿”å›æŠ¥æ–‡å½“åšHTMLè§£æï¼Œå¢åŠ åå°„å‹XSSçš„è§¦å‘å‡ ç‡ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="152å»ºè®®è®¾ç½®å®‰å…¨çš„httpå“åº”å¤´">1.5.2ã€å»ºè®®ã€‘è®¾ç½®å®‰å…¨çš„HTTPå“åº”å¤´<a class="hash-link" href="#152å»ºè®®è®¾ç½®å®‰å…¨çš„httpå“åº”å¤´" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><ul><li>X-Content-Type-Optionsï¼š</li></ul><p>â€‹        å»ºè®®æ·»åŠ â€œX-Content-Type-Optionsâ€å“åº”å¤´å¹¶å°†å…¶å€¼è®¾ç½®ä¸ºâ€œnosniffâ€ï¼Œå¯é¿å…éƒ¨åˆ†æµè§ˆå™¨æ ¹æ®å…¶â€œContent-Sniffâ€ç‰¹æ€§ï¼Œå°†ä¸€äº›éâ€œtext/htmlâ€ç±»å‹çš„å“åº”ä½œä¸ºHTMLè§£æï¼Œå¢åŠ åå°„å‹XSSçš„è§¦å‘å‡ ç‡ã€‚</p><ul><li>HttpOnlyï¼š</li></ul><p>â€‹         æ§åˆ¶ç”¨æˆ·ç™»å½•é‰´æƒçš„Cookieå­—æ®µ åº”å½“è®¾ç½®HttpOnlyå±æ€§ä»¥é˜²æ­¢è¢«XSSæ¼æ´/JavaScriptæ“çºµæ³„æ¼ã€‚</p><ul><li>X-Frame-Optionsï¼š</li></ul><p>â€‹        è®¾ç½®X-Frame-Optionså“åº”å¤´ï¼Œå¹¶æ ¹æ®éœ€æ±‚åˆç†è®¾ç½®å…¶å…è®¸èŒƒå›´ã€‚è¯¥å¤´ç”¨äºæŒ‡ç¤ºæµè§ˆå™¨ç¦æ­¢å½“å‰é¡µé¢åœ¨frameã€iframeã€embedç­‰æ ‡ç­¾ä¸­å±•ç°ã€‚ä»è€Œé¿å…ç‚¹å‡»åŠ«æŒé—®é¢˜ã€‚å®ƒæœ‰ä¸‰ä¸ªå¯é€‰çš„å€¼ï¼š
â€‹        DENYï¼š æµè§ˆå™¨ä¼šæ‹’ç»å½“å‰é¡µé¢åŠ è½½ä»»ä½•frameé¡µé¢ï¼›
â€‹  SAMEORIGINï¼šåˆ™frameé¡µé¢çš„åœ°å€åªèƒ½ä¸ºåŒæºåŸŸåä¸‹çš„é¡µé¢
â€‹  ALLOW-FROM originï¼šå¯ä»¥å®šä¹‰å…è®¸frameåŠ è½½çš„é¡µé¢åœ°å€ã€‚</p><ul><li><p>Access-Control-Allow-Origin</p><p>å½“éœ€è¦é…ç½®CORSè·¨åŸŸæ—¶ï¼Œåº”å¯¹è¯·æ±‚å¤´çš„Originå€¼åšä¸¥æ ¼è¿‡æ»¤ã€‚</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">String</span><span class="token plain"> currentOrigin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Origin&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">currentOrigin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://domain.qq.com&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> currentOrigin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="153-å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°responseé¡µé¢å‰è¿›è¡Œç¼–ç å¤„ç†">1.5.3 å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°responseé¡µé¢å‰è¿›è¡Œç¼–ç å¤„ç†<a class="hash-link" href="#153-å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°responseé¡µé¢å‰è¿›è¡Œç¼–ç å¤„ç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å½“å“åº”â€œcontent-typeâ€ä¸ºâ€œhtmlâ€ç±»å‹æ—¶ï¼Œå¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°å“åº”åŒ…ä¸­ï¼Œéœ€æ ¹æ®è¾“å‡ºä½ç½®è¿›è¡Œç¼–ç å¤„ç†ã€‚ç¼–ç è§„åˆ™ï¼š</p><table><thead><tr><th>åœºæ™¯</th><th>ç¼–ç è§„åˆ™</th></tr></thead><tbody><tr><td>è¾“å‡ºç‚¹åœ¨HTMLæ ‡ç­¾ä¹‹é—´</td><td>éœ€è¦å¯¹ä»¥ä¸‹6ä¸ªç‰¹æ®Šå­—ç¬¦è¿›è¡ŒHTMLå®ä½“ç¼–ç (&amp;, &lt;, &gt;, &quot;, &#x27;,/)ã€‚<br>ç¤ºä¾‹ï¼š<br>&amp; --&gt; <!-- -->&amp;<!-- -->amp;<br>&lt; --&gt; <!-- -->&amp;<!-- -->lt;<br>&gt;--&gt; <!-- -->&amp;<!-- -->gt;<br>&quot; --&gt; <!-- -->&amp;<!-- -->quot;<br>&#x27; --&gt; <!-- -->&amp;<!-- -->#x27;  <br>/ --&gt; <!-- -->&amp;<!-- -->#x2F;</td></tr><tr><td>è¾“å‡ºç‚¹åœ¨HTMLæ ‡ç­¾æ™®é€šå±æ€§å†…ï¼ˆå¦‚hrefã€srcã€styleç­‰ï¼Œonäº‹ä»¶é™¤å¤–ï¼‰</td><td>è¦å¯¹æ•°æ®è¿›è¡ŒHTMLå±æ€§ç¼–ç ã€‚<br>ç¼–ç è§„åˆ™ï¼šé™¤äº†é˜¿æ‹‰ä¼¯æ•°å­—å’Œå­—æ¯ï¼Œå¯¹å…¶ä»–æ‰€æœ‰çš„å­—ç¬¦è¿›è¡Œç¼–ç ï¼Œåªè¦è¯¥å­—ç¬¦çš„ASCIIç å°äº256ã€‚ç¼–ç åè¾“å‡ºçš„æ ¼å¼ä¸º&amp;#xHH;(ä»¥&amp;#xå¼€å¤´ï¼ŒHHåˆ™æ˜¯æŒ‡è¯¥å­—ç¬¦å¯¹åº”çš„åå…­è¿›åˆ¶æ•°å­—ï¼Œåˆ†å·ä½œä¸ºç»“æŸç¬¦)</td></tr><tr><td>è¾“å‡ºç‚¹åœ¨JSå†…çš„æ•°æ®ä¸­</td><td>éœ€è¦è¿›è¡Œjsç¼–ç <br>ç¼–ç è§„åˆ™ï¼š<br>é™¤äº†é˜¿æ‹‰ä¼¯æ•°å­—å’Œå­—æ¯ï¼Œå¯¹å…¶ä»–æ‰€æœ‰çš„å­—ç¬¦è¿›è¡Œç¼–ç ï¼Œåªè¦è¯¥å­—ç¬¦çš„ASCIIç å°äº256ã€‚ç¼–ç åè¾“å‡ºçš„æ ¼å¼ä¸º \xHH ï¼ˆä»¥ \x å¼€å¤´ï¼ŒHHåˆ™æ˜¯æŒ‡è¯¥å­—ç¬¦å¯¹åº”çš„åå…­è¿›åˆ¶æ•°å­—ï¼‰<br>Tipsï¼šè¿™ç§åœºæ™¯ä»…é™äºå¤–éƒ¨æ•°æ®æ‹¼æ¥åœ¨jsé‡Œè¢«å¼•å·æ‹¬èµ·æ¥çš„å˜é‡å€¼ä¸­ã€‚é™¤æ­¤ä¹‹å¤–ç¦æ­¢ç›´æ¥å°†ä»£ç æ‹¼æ¥åœ¨jsä»£ç ä¸­ã€‚</td></tr><tr><td>è¾“å‡ºç‚¹åœ¨CSSä¸­ï¼ˆStyleå±æ€§ï¼‰</td><td>éœ€è¦è¿›è¡ŒCSSç¼–ç <br>ç¼–ç è§„åˆ™ï¼š<br>é™¤äº†é˜¿æ‹‰ä¼¯æ•°å­—å’Œå­—æ¯ï¼Œå¯¹å…¶ä»–æ‰€æœ‰çš„å­—ç¬¦è¿›è¡Œç¼–ç ï¼Œåªè¦è¯¥å­—ç¬¦çš„ASCIIç å°äº256ã€‚ç¼–ç åè¾“å‡ºçš„æ ¼å¼ä¸º \HH ï¼ˆä»¥ \ å¼€å¤´ï¼ŒHHåˆ™æ˜¯æŒ‡è¯¥å­—ç¬¦å¯¹åº”çš„åå…­è¿›åˆ¶æ•°å­—ï¼‰</td></tr><tr><td>è¾“å‡ºç‚¹åœ¨URLå±æ€§ä¸­</td><td>å¯¹è¿™äº›æ•°æ®è¿›è¡ŒURLç¼–ç <br>Tipsï¼šé™¤æ­¤ä¹‹å¤–ï¼Œæ‰€æœ‰é“¾æ¥ç±»å±æ€§åº”è¯¥æ ¡éªŒå…¶åè®®ã€‚ç¦æ­¢JavaScriptã€dataå’ŒVbä¼ªåè®®ã€‚</td></tr></tbody></table><p>ä»¥ä¸Šç¼–ç è§„åˆ™ç›¸å¯¹è¾ƒä¸ºç¹çï¼Œå¯å‚è€ƒæˆ–ç›´æ¥ä½¿ç”¨ä¸šç•Œå·²æœ‰æˆç†Ÿç¬¬ä¸‰æ–¹åº“å¦‚ESAPI.å…¶æä¾›ä»¥ä¸‹å‡½æ•°å¯¹è±¡ä¸Šè¡¨ä¸­çš„ç¼–ç è§„åˆ™:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token constant" style="color:#36acaa">ESAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encoder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encodeForHTML</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">ESAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encoder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encodeForHTMLAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">ESAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encoder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encodeForJavaScript</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">ESAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encoder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encodeForCSS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">ESAPI</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encoder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encodeForURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="154-å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°httpå“åº”å¤´ä¸­éœ€è¿›è¡Œè¿‡æ»¤">1.5.4 å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°HTTPå“åº”å¤´ä¸­éœ€è¿›è¡Œè¿‡æ»¤<a class="hash-link" href="#154-å¤–éƒ¨è¾“å…¥æ‹¼æ¥åˆ°httpå“åº”å¤´ä¸­éœ€è¿›è¡Œè¿‡æ»¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>åº”å°½é‡é¿å…å¤–éƒ¨å¯æ§å‚æ•°æ‹¼æ¥åˆ°HTTPå“åº”å¤´ä¸­ï¼Œå¦‚ä¸šåŠ¡éœ€è¦åˆ™éœ€è¦è¿‡æ»¤æ‰â€œ\râ€ã€&quot;\n&quot;ç­‰æ¢è¡Œç¬¦ï¼Œæˆ–è€…æ‹’ç»æºå¸¦æ¢è¡Œç¬¦å·çš„å¤–éƒ¨è¾“å…¥ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="155-é¿å…ä¸å¯ä¿¡åŸŸåçš„302è·³è½¬">1.5.5 é¿å…ä¸å¯ä¿¡åŸŸåçš„302è·³è½¬<a class="hash-link" href="#155-é¿å…ä¸å¯ä¿¡åŸŸåçš„302è·³è½¬" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¦‚æœå¯¹å¤–éƒ¨ä¼ å…¥åŸŸåè¿›è¡Œ302è·³è½¬ï¼Œå¿…é¡»è®¾ç½®å¯ä¿¡åŸŸååˆ—è¡¨å¹¶å¯¹ä¼ å…¥åŸŸåè¿›è¡Œæ ¡éªŒã€‚</p><p>ä¸ºé¿å…æ ¡éªŒè¢«ç»•è¿‡ï¼Œåº”é¿å…ç›´æ¥å¯¹URLè¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…ã€‚åº”é€šè¿‡é€šè¿‡URLè§£æå‡½æ•°è¿›è¡Œè§£æï¼Œè·å–hostæˆ–è€…domainåå’Œç™½åå•è¿›è¡Œæ¯”è¾ƒã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæµè§ˆå™¨çš„å®¹é”™æœºåˆ¶ï¼ŒåŸŸå<code>https://www.qq.com\www.bbb.com</code>ä¸­çš„<code>\</code>ä¼šè¢«æ›¿æ¢æˆ<code>/</code>ï¼Œæœ€ç»ˆè·³è½¬åˆ°<code>www.qq.com</code>ã€‚è€ŒJavaçš„åŸŸåè§£æå‡½æ•°åˆ™æ— æ­¤ç‰¹æ€§ã€‚ä¸ºé¿å…è§£æä¸ä¸€è‡´å¯¼è‡´ç»•è¿‡ï¼Œå»ºè®®å¯¹hostä¸­çš„<code>/</code>å’Œ<code>#</code>è¿›è¡Œæ›¿æ¢ã€‚</p><p>å‚è€ƒä»£ç ï¼š</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> host</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">replaceAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;[\\\\#]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;/&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//æ›¿æ¢æ‰åæ–œçº¿å’Œäº•å·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      host </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">URL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getHost</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MalformedURLException</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">printStackTrace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">endsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;.qq.com&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">//è·³è½¬æ“ä½œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="156-é¿å…é€šè¿‡jsonpä¼ è¾“éå…¬å¼€æ•æ„Ÿä¿¡æ¯">1.5.6 é¿å…é€šè¿‡Jsonpä¼ è¾“éå…¬å¼€æ•æ„Ÿä¿¡æ¯<a class="hash-link" href="#156-é¿å…é€šè¿‡jsonpä¼ è¾“éå…¬å¼€æ•æ„Ÿä¿¡æ¯" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>jsonpè¯·æ±‚å†è¢«CSRFæ”»å‡»æ—¶ï¼Œå…¶å“åº”åŒ…å¯è¢«æ”»å‡»æ–¹åŠ«æŒå¯¼è‡´ä¿¡æ¯æ³„éœ²ã€‚åº”é¿å…é€šè¿‡jsonpä¼ è¾“éå…¬å¼€çš„æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·éšç§ä¿¡æ¯ã€èº«ä»½å‡­è¯ç­‰ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="157-é™å®šjsonpæ¥å£çš„callbackå­—ç¬¦é›†èŒƒå›´">1.5.7 é™å®šJSONPæ¥å£çš„callbackå­—ç¬¦é›†èŒƒå›´<a class="hash-link" href="#157-é™å®šjsonpæ¥å£çš„callbackå­—ç¬¦é›†èŒƒå›´" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>JSONPæ¥å£çš„callbackå‡½æ•°åä¸ºå›ºå®šç™½åå•ã€‚å¦‚callbackå‡½æ•°åå¯ç”¨æˆ·è‡ªå®šä¹‰ï¼Œåº”é™åˆ¶å‡½æ•°åä»…åŒ…å« å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ã€‚å¦‚ï¼š<code>[a-zA-Z0-9_-]+</code></p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="158-å±è”½å¼‚å¸¸æ ˆ">1.5.8 å±è”½å¼‚å¸¸æ ˆ<a class="hash-link" href="#158-å±è”½å¼‚å¸¸æ ˆ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>åº”ç”¨ç¨‹åºå‡ºç°å¼‚å¸¸æ—¶ï¼Œç¦æ­¢å°†æ•°æ®åº“ç‰ˆæœ¬ã€æ•°æ®åº“ç»“æ„ã€æ“ä½œç³»ç»Ÿç‰ˆæœ¬ã€å †æ ˆè·Ÿè¸ªã€æ–‡ä»¶åå’Œè·¯å¾„ä¿¡æ¯ã€SQL æŸ¥è¯¢å­—ç¬¦ä¸²ç­‰å¯¹æ”»å‡»è€…æœ‰ç”¨çš„ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚å»ºè®®é‡å®šå‘åˆ°ä¸€ä¸ªç»Ÿä¸€ã€é»˜è®¤çš„é”™è¯¯æç¤ºé¡µé¢ï¼Œè¿›è¡Œä¿¡æ¯è¿‡æ»¤ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="159-æ¨¡æ¿è¡¨è¾¾å¼">1.5.9 æ¨¡æ¿&amp;è¡¨è¾¾å¼<a class="hash-link" href="#159-æ¨¡æ¿è¡¨è¾¾å¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>web viewå±‚é€šå¸¸é€šè¿‡æ¨¡æ¿æŠ€æœ¯æˆ–è€…è¡¨è¾¾å¼å¼•æ“æ¥å®ç°ç•Œé¢ä¸ä¸šåŠ¡æ•°æ®åˆ†ç¦»ï¼Œæ¯”å¦‚jspä¸­çš„ELè¡¨è¾¾å¼ã€‚è¿™äº›å¼•æ“é€šå¸¸å¯æ‰§è¡Œæ•æ„Ÿæ“ä½œï¼Œå¦‚æœå¤–éƒ¨ä¸å¯ä¿¡æ•°æ®æœªç»è¿‡æ»¤æ‹¼æ¥åˆ°è¡¨è¾¾å¼ä¸­è¿›è¡Œè§£æã€‚åˆ™å¯èƒ½é€ æˆä¸¥é‡æ¼æ´ã€‚</p><p>ä¸‹åˆ—æ˜¯åŸºäºELè¡¨è¾¾å¼æ³¨å…¥æ¼æ´çš„æ¼”ç¤ºdemoï¼š</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@RequestMapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/ELdemo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token annotation punctuation" style="color:#393A34">@ResponseBody</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token class-name">ELdemo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RepeatDTO</span><span class="token plain"> repeat</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token class-name">ExpressionFactory</span><span class="token plain"> expressionFactory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ExpressionFactoryImpl</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">SimpleContext</span><span class="token plain"> simpleContext </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">SimpleContext</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> exp </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;${&quot;</span><span class="token operator" style="color:#393A34">+</span><span class="token plain">repeat</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">+</span><span class="token string" style="color:#e3116c">&quot;}&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">ValueExpression</span><span class="token plain"> valueExpression </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">       expressionFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">createValueExpression</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">simpleContext</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> exp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">class</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> valueExpression</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">simpleContext</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¤–éƒ¨å¯é€šè¿‡elå‚æ•°ï¼Œå°†ä¸å¯ä¿¡è¾“å…¥æ‹¼æ¥åˆ°ELè¡¨è¾¾å¼ä¸­å¹¶è§£æã€‚</p><p>æ­¤æ—¶å¤–éƒ¨è®¿é—®ï¼šx.x.x.x/ELdemo?el=â€&#x27;&#x27;.getClass().forName(&#x27;java.lang.Runtime&#x27;).getMethod(&#x27;exec&#x27;,&#x27;&#x27;.getClass()).invoke(&#x27;&#x27;.getClass().forName(&#x27;java.lang.Runtime&#x27;).getMethod(&#x27;getRuntime&#x27;).invoke(null),&#x27;open /Applications/Calculator.app&#x27;)â€œ å¯æ‰§è¡Œæ“ä½œç³»ç»Ÿå‘½ä»¤è°ƒå‡ºè®¡ç®—å™¨ã€‚</p><p> åŸºäºä»¥ä¸Šé£é™©ï¼š</p><ul><li>åº”é¿å…å¤–éƒ¨è¾“å…¥çš„å†…å®¹æ‹¼æ¥åˆ°ELè¡¨è¾¾å¼æˆ–å…¶ä»–è¡¨è¾¾å¼å¼•èµ·ã€æ¨¡æ¿å¼•æ“è¿›è¡Œè§£æã€‚</li><li>ç™½åå•è¿‡æ»¤å¤–éƒ¨è¾“å…¥ï¼Œä»…å…è®¸å­—ç¬¦ã€æ•°å­—ã€ä¸‹åˆ’çº¿ç­‰ã€‚</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="16-oså‘½ä»¤æ‰§è¡Œ">1.6 OSå‘½ä»¤æ‰§è¡Œ<a class="hash-link" href="#16-oså‘½ä»¤æ‰§è¡Œ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="161å»ºè®®é¿å…ä¸å¯ä¿¡æ•°æ®æ‹¼æ¥æ“ä½œç³»ç»Ÿå‘½ä»¤">1.6.1ã€å»ºè®®ã€‘é¿å…ä¸å¯ä¿¡æ•°æ®æ‹¼æ¥æ“ä½œç³»ç»Ÿå‘½ä»¤<a class="hash-link" href="#161å»ºè®®é¿å…ä¸å¯ä¿¡æ•°æ®æ‹¼æ¥æ“ä½œç³»ç»Ÿå‘½ä»¤" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å½“ä¸å¯ä¿¡æ•°æ®å­˜åœ¨æ—¶ï¼Œåº”å°½é‡é¿å…å¤–éƒ¨æ•°æ®æ‹¼æ¥åˆ°æ“ä½œç³»ç»Ÿå‘½ä»¤ä½¿ç”¨ <code>Runtime</code> å’Œ <code>ProcessBuilder</code> æ¥æ‰§è¡Œã€‚ä¼˜å…ˆä½¿ç”¨å…¶ä»–åŒç±»æ“ä½œè¿›è¡Œä»£æ›¿ï¼Œæ¯”å¦‚é€šè¿‡æ–‡ä»¶ç³»ç»ŸAPIè¿›è¡Œæ–‡ä»¶æ“ä½œè€Œéç›´æ¥è°ƒç”¨æ“ä½œç³»ç»Ÿå‘½ä»¤ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="162-é¿å…åˆ›å»ºshellæ“ä½œ">1.6.2 é¿å…åˆ›å»ºSHELLæ“ä½œ<a class="hash-link" href="#162-é¿å…åˆ›å»ºshellæ“ä½œ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¦‚æ— æ³•é¿å…ç›´æ¥è®¿é—®æ“ä½œç³»ç»Ÿå‘½ä»¤ï¼Œéœ€è¦ä¸¥æ ¼ç®¡ç†å¤–éƒ¨ä¼ å…¥å‚æ•°ï¼Œä½¿ä¸å¯ä¿¡æ•°æ®ä»…ä½œä¸ºæ‰§è¡Œå‘½ä»¤çš„å‚æ•°è€Œéå‘½ä»¤ã€‚</p><ul><li><p>ç¦æ­¢å¤–éƒ¨æ•°æ®ç›´æ¥ç›´æ¥ä½œä¸ºæ“ä½œç³»ç»Ÿå‘½ä»¤æ‰§è¡Œã€‚</p></li><li><p>é¿å…é€šè¿‡&quot;cmd&quot;ã€â€œbashâ€ã€â€œshâ€ç­‰å‘½ä»¤åˆ›å»ºshellåæ‹¼æ¥å¤–éƒ¨æ•°æ®æ¥æ‰§è¡Œæ“ä½œç³»ç»Ÿå‘½ä»¤ã€‚</p></li><li><p>å¯¹å¤–éƒ¨ä¼ å…¥æ•°æ®è¿›è¡Œè¿‡æ»¤ã€‚å¯é€šè¿‡ç™½åå•é™åˆ¶å­—ç¬¦ç±»å‹ï¼Œä»…å…è®¸å­—ç¬¦ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼›æˆ–è¿‡æ»¤è½¬ä¹‰ä»¥ä¸‹ç¬¦å·ï¼š|;&amp;$&gt;&lt;`ï¼ˆåå¼•å·ï¼‰<!-- -->!</p><p>ç™½åå•ç¤ºä¾‹ï¼š</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">Pattern</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">FILTER_PATTERN</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Pattern</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">compile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;[0-9A-Za-z_]+&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token constant" style="color:#36acaa">FILTER_PATTERN</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">matcher</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">input</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">matches</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ç»ˆæ­¢å½“å‰è¯·æ±‚çš„å¤„ç†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="17-ä¼šè¯ç®¡ç†">1.7 ä¼šè¯ç®¡ç†<a class="hash-link" href="#17-ä¼šè¯ç®¡ç†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="171-éä¸€æ¬¡æœ‰æ•ˆèº«ä»½å‡­è¯ç¦æ­¢åœ¨urlä¸­ä¼ è¾“">1.7.1 éä¸€æ¬¡æœ‰æ•ˆèº«ä»½å‡­è¯ç¦æ­¢åœ¨URLä¸­ä¼ è¾“<a class="hash-link" href="#171-éä¸€æ¬¡æœ‰æ•ˆèº«ä»½å‡­è¯ç¦æ­¢åœ¨urlä¸­ä¼ è¾“" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>èº«ä»½å‡­è¯ç¦æ­¢åœ¨URLä¸­ä¼ è¾“ï¼Œä¸€æ¬¡æœ‰æ•ˆçš„èº«ä»½å‡­è¯é™¤å¤–ï¼ˆå¦‚CASä¸­çš„stï¼‰ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="172-é¿å…æœªç»æ ¡éªŒçš„æ•°æ®ç›´æ¥ç»™ä¼šè¯èµ‹å€¼">1.7.2 é¿å…æœªç»æ ¡éªŒçš„æ•°æ®ç›´æ¥ç»™ä¼šè¯èµ‹å€¼<a class="hash-link" href="#172-é¿å…æœªç»æ ¡éªŒçš„æ•°æ®ç›´æ¥ç»™ä¼šè¯èµ‹å€¼" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>é˜²æ­¢ä¼šè¯ä¿¡æ¯è¢«ç¯¡æ”¹ï¼Œå¦‚æ¶æ„ç”¨æˆ·é€šè¿‡URLç¯¡æ”¹æ‰‹æœºå·ç ç­‰ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="18-åŠ è§£å¯†">1.8 åŠ è§£å¯†<a class="hash-link" href="#18-åŠ è§£å¯†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="181å»ºè®®å¯¹ç§°åŠ å¯†">1.8.1ã€å»ºè®®ã€‘å¯¹ç§°åŠ å¯†<a class="hash-link" href="#181å»ºè®®å¯¹ç§°åŠ å¯†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å»ºè®®ä½¿ç”¨AESï¼Œç§˜é’¥é•¿åº¦128ä½ä»¥ä¸Šã€‚ç¦æ­¢ä½¿ç”¨DESç®—æ³•ï¼Œç”±äºç§˜é’¥å¤ªçŸ­ï¼Œå…¶ä¸ºç›®å‰å·²çŸ¥ä¸å®‰å…¨åŠ å¯†ç®—æ³•ã€‚ä½¿ç”¨AESåŠ å¯†ç®—æ³•è¯·å‚è€ƒä»¥ä¸‹æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>AESç®—æ³•å¦‚æœé‡‡ç”¨CBCæ¨¡å¼ï¼šæ¯æ¬¡åŠ å¯†æ—¶IVå¿…é¡»é‡‡ç”¨å¯†ç å­¦å®‰å…¨çš„ä¼ªéšæœºå‘ç”Ÿå™¨ï¼ˆå¦‚/dev/urandomï¼‰,ç¦æ­¢å¡«å……å…¨0ç­‰å›ºå®šå€¼ã€‚</li><li>AESç®—æ³•å¦‚é‡‡ç”¨GCMæ¨¡å¼ï¼Œnonceé¡»é‡‡ç”¨å¯†ç å­¦å®‰å…¨çš„ä¼ªéšæœºæ•°</li><li>AESç®—æ³•é¿å…ä½¿ç”¨ECBæ¨¡å¼ï¼Œæ¨èä½¿ç”¨GCMæ¨¡å¼ã€‚</li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="182å»ºè®®éå¯¹ç§°åŠ å¯†">1.8.2ã€å»ºè®®ã€‘éå¯¹ç§°åŠ å¯†<a class="hash-link" href="#182å»ºè®®éå¯¹ç§°åŠ å¯†" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å»ºè®®ä½¿ç”¨RSAç®—æ³•ï¼Œç§˜é’¥2048åŠä»¥ä¸Šã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="183å»ºè®®å“ˆå¸Œç®—æ³•">1.8.3ã€å»ºè®®ã€‘å“ˆå¸Œç®—æ³•<a class="hash-link" href="#183å»ºè®®å“ˆå¸Œç®—æ³•" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å“ˆå¸Œç®—æ³•æ¨èä½¿ç”¨SHA-2åŠä»¥ä¸Šã€‚å¯¹äºç­¾ååœºæ™¯ï¼Œåº”ä½¿ç”¨HMACç®—æ³•ã€‚å¦‚æœé‡‡ç”¨å­—ç¬¦ä¸²æ‹¼æ¥ç›å€¼åå“ˆå¸Œçš„æ–¹å¼ï¼Œç¦æ­¢å°†ç›å€¼ç½®äºå­—ç¬¦ä¸²å¼€å¤´ï¼Œä»¥é¿å…å“ˆå¸Œé•¿åº¦æ‹“å±•æ”»å‡»ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="184å»ºè®®å¯†ç å­˜å‚¨ç­–ç•¥">1.8.4ã€å»ºè®®ã€‘å¯†ç å­˜å‚¨ç­–ç•¥<a class="hash-link" href="#184å»ºè®®å¯†ç å­˜å‚¨ç­–ç•¥" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å»ºè®®é‡‡ç”¨éšæœºç›+æ˜æ–‡å¯†ç è¿›è¡Œå¤šè½®å“ˆå¸Œåå­˜å‚¨å¯†ç ã€‚</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="19-æŸ¥è¯¢ä¸šåŠ¡">1.9 æŸ¥è¯¢ä¸šåŠ¡<a class="hash-link" href="#19-æŸ¥è¯¢ä¸šåŠ¡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="191-è¿”å›ä¿¡æ¯æœ€å°åŒ–">1.9.1 è¿”å›ä¿¡æ¯æœ€å°åŒ–<a class="hash-link" href="#191-è¿”å›ä¿¡æ¯æœ€å°åŒ–" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>è¿”å›ç”¨æˆ·ä¿¡æ¯åº”éµå¾ªæœ€å°åŒ–åŸåˆ™ï¼Œé¿å…å°†ä¸šåŠ¡éœ€æ±‚ä¹‹å¤–çš„ç”¨æˆ·ä¿¡æ¯è¿”å›åˆ°å‰ç«¯ã€‚</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="192-ä¸ªäººæ•æ„Ÿä¿¡æ¯è„±æ•å±•ç¤º">1.9.2 ä¸ªäººæ•æ„Ÿä¿¡æ¯è„±æ•å±•ç¤º<a class="hash-link" href="#192-ä¸ªäººæ•æ„Ÿä¿¡æ¯è„±æ•å±•ç¤º" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>åœ¨æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„æƒ…å†µä¸‹ï¼Œä¸ªäººæ•æ„Ÿä¿¡æ¯éœ€è„±æ•å±•ç¤º,å¦‚ï¼š</p><ul><li>é‰´æƒä¿¡æ¯ï¼ˆå¦‚å£ä»¤ã€å¯†ä¿ç­”æ¡ˆã€ç”Ÿç†æ ‡è¯†ç­‰ï¼‰ä¸å…è®¸å±•ç¤º</li><li>èº«ä»½è¯åªæ˜¾ç¤ºç¬¬ä¸€ä½å’Œæœ€åä¸€ä½å­—ç¬¦ï¼Œå¦‚3<strong><strong><strong>****</strong></strong></strong>1ã€‚</li><li>ç§»åŠ¨ç”µè¯å·ç éšè—ä¸­é—´6ä½å­—ç¬¦ï¼Œå¦‚134<strong>**</strong>48ã€‚</li><li>å·¥ä½œåœ°å€/å®¶åº­åœ°å€æœ€å¤šæ˜¾ç¤ºåˆ°â€œåŒºâ€ä¸€çº§ã€‚</li><li>é“¶è¡Œå¡å·ä»…æ˜¾ç¤ºæœ€å4ä½å­—ç¬¦ï¼Œå¦‚<strong><strong>****</strong></strong>8639  </li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="193-æ•°æ®æƒé™æ ¡éªŒ">1.9.3 æ•°æ®æƒé™æ ¡éªŒ<a class="hash-link" href="#193-æ•°æ®æƒé™æ ¡éªŒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>æŸ¥è¯¢ä¸ªäººéå…¬å¼€ä¿¡æ¯æ—¶ï¼Œéœ€è¦å¯¹å½“å‰è®¿é—®è´¦å·è¿›è¡Œæ•°æ®æƒé™æ ¡éªŒã€‚</p><ol><li>éªŒè¯å½“å‰ç”¨æˆ·çš„ç™»å½•æ€</li><li>ä»å¯ä¿¡ç»“æ„ä¸­è·å–ç»è¿‡æ ¡éªŒçš„å½“å‰è¯·æ±‚è´¦å·çš„èº«ä»½ä¿¡æ¯ï¼ˆå¦‚ï¼šsessionï¼‰ã€‚ç¦æ­¢ä»ç”¨æˆ·è¯·æ±‚å‚æ•°æˆ–Cookieä¸­è·å–å¤–éƒ¨ä¼ å…¥ä¸å¯ä¿¡ç”¨æˆ·èº«ä»½ç›´æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚</li><li>éªŒå½“å‰ç”¨æˆ·æ˜¯å¦å…·å¤‡è®¿é—®æ•°æ®çš„æƒé™</li></ol><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="110-æ“ä½œä¸šåŠ¡">1.10 æ“ä½œä¸šåŠ¡<a class="hash-link" href="#110-æ“ä½œä¸šåŠ¡" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1101-éƒ¨ç½²csrfé˜²å¾¡æœºåˆ¶">1.10.1 éƒ¨ç½²CSRFé˜²å¾¡æœºåˆ¶<a class="hash-link" href="#1101-éƒ¨ç½²csrfé˜²å¾¡æœºåˆ¶" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>CSRFæ˜¯æŒ‡è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCross-site request forgeryï¼‰ï¼Œæ˜¯webå¸¸è§çš„æ”»å‡»ä¹‹ä¸€ã€‚å¯¹äºå¯é‡æ”¾çš„æ•æ„Ÿæ“ä½œè¯·æ±‚ï¼Œéœ€éƒ¨ç½²CSRFé˜²å¾¡æœºåˆ¶ã€‚å¯å‚è€ƒä»¥ä¸‹ä¸¤ç§å¸¸è§çš„CSRFé˜²å¾¡æ–¹å¼</p><ul><li><p>è®¾ç½®CSRF Token</p><p>æœåŠ¡ç«¯ç»™åˆæ³•çš„å®¢æˆ·é¢å‘CSRF Tokenï¼Œå®¢æˆ·ç«¯åœ¨å‘é€è¯·æ±‚æ—¶æºå¸¦è¯¥tokenä¾›æœåŠ¡ç«¯æ ¡éªŒï¼ŒæœåŠ¡ç«¯æ‹’ç»tokenéªŒè¯ä¸é€šè¿‡çš„è¯·æ±‚ã€‚ä»¥æ­¤æ¥é˜²æ­¢ç¬¬ä¸‰æ–¹æ„é€ åˆæ³•çš„æ¶æ„æ“ä½œé“¾æ¥ã€‚Tokençš„ä½œç”¨åŸŸå¯ä»¥æ˜¯Requestçº§æˆ–è€…Sessionçº§ã€‚ä¸‹é¢ä»¥Sessionçº§CSRF Tokenè¿›è¡Œç¤ºä¾‹</p><ol><li><p>ç™»å½•æˆåŠŸåé¢å‘Tokenï¼Œå¹¶åŒæ—¶å­˜å‚¨åœ¨æœåŠ¡ç«¯Sessionä¸­</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">String</span><span class="token plain"> uuidToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">UUID</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">randomUUID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> uuidToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSession</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">setAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">uuidToken </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> map</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>åˆ›å»ºFilter</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">CsrfFilter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Filter</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token class-name">HttpSession</span><span class="token plain"> session </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getSession</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token class-name">Object</span><span class="token plain"> token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> session</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getAttribute</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token class-name">String</span><span class="token plain"> requestToken </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getParameter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;token&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">StringUtils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">isBlank</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">requestToken</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">requestToken</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">equals</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token class-name">AjaxResponseWriter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> resp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">ServiceStatusEnum</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">ILLEGAL_TOKEN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;éæ³•çš„token&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><p>â€‹     CSRF Tokenåº”å…·å¤‡éšæœºæ€§ï¼Œä¿è¯å…¶ä¸å¯é¢„æµ‹å’Œæšä¸¾ã€‚å¦å¤–ç”±äºæµè§ˆå™¨ä¼šè‡ªåŠ¨å¯¹è¡¨å•æ‰€è®¿é—®çš„åŸŸåæ·»åŠ ç›¸åº”çš„cookieä¿¡æ¯ï¼Œæ‰€ä»¥CSRF Tokenä¸åº”è¯¥é€šè¿‡Cookieä¼ è¾“ã€‚</p></li><li><p>æ ¡éªŒRefererå¤´</p><p>é€šè¿‡æ£€æŸ¥HTTPè¯·æ±‚çš„Refererå­—æ®µæ˜¯å¦å±äºæœ¬ç«™åŸŸåï¼Œéæœ¬ç«™åŸŸåçš„è¯·æ±‚è¿›è¡Œæ‹’ç»ã€‚</p><p>è¿™ç§æ ¡éªŒæ–¹å¼éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p><ol><li>è¦éœ€è¦å¤„ç†Refererä¸ºç©ºçš„æƒ…å†µï¼Œå½“Refererä¸ºç©ºåˆ™æ‹’ç»è¯·æ±‚</li><li>æ³¨æ„é¿å…ä¾‹å¦‚qq.com.evil.com éƒ¨åˆ†åŒ¹é…çš„æƒ…å†µã€‚</li></ol></li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1102-æƒé™æ ¡éªŒ">1.10.2 æƒé™æ ¡éªŒ<a class="hash-link" href="#1102-æƒé™æ ¡éªŒ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¯¹äºéå…¬å…±æ“ä½œï¼Œåº”å½“æ ¡éªŒå½“å‰è®¿é—®è´¦å·è¿›è¡Œæ“ä½œæƒé™ï¼ˆå¸¸è§äºCMSï¼‰å’Œæ•°æ®æƒé™æ ¡éªŒã€‚</p><ol><li>éªŒè¯å½“å‰ç”¨æˆ·çš„ç™»å½•æ€</li><li>ä»å¯ä¿¡ç»“æ„ä¸­è·å–ç»è¿‡æ ¡éªŒçš„å½“å‰è¯·æ±‚è´¦å·çš„èº«ä»½ä¿¡æ¯ï¼ˆå¦‚ï¼šsessionï¼‰ã€‚ç¦æ­¢ä»ç”¨æˆ·è¯·æ±‚å‚æ•°æˆ–Cookieä¸­è·å–å¤–éƒ¨ä¼ å…¥ä¸å¯ä¿¡ç”¨æˆ·èº«ä»½ç›´æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚</li><li>æ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦å…·å¤‡è¯¥æ“ä½œæƒé™</li><li>æ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦å…·å¤‡æ‰€æ“ä½œæ•°æ®çš„æƒé™ã€‚é¿å…è¶Šæƒã€‚</li></ol><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1103å»ºè®®åŠ é”æ“ä½œ">1.10.3ã€å»ºè®®ã€‘åŠ é”æ“ä½œ<a class="hash-link" href="#1103å»ºè®®åŠ é”æ“ä½œ" title="æ ‡é¢˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h5><p>å¯¹äºæœ‰æ¬¡æ•°é™åˆ¶çš„æ“ä½œï¼Œæ¯”å¦‚æŠ½å¥–ã€‚å¦‚æœæ“ä½œçš„è¿‡ç¨‹ä¸­èµ„æºè®¿é—®æœªæ­£ç¡®åŠ é”ã€‚åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹å¯èƒ½é€ æˆæ¡ä»¶ç«äº‰ï¼Œå¯¼è‡´å®é™…æ“ä½œæˆåŠŸæ¬¡æ•°å¤šäºç”¨æˆ·å®é™…æ“ä½œèµ„æ ¼æ¬¡æ•°ã€‚æ­¤ç±»æ“ä½œåº”åŠ é”å¤„ç†ã€‚</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡æ¡£åˆ†é¡µå¯¼èˆª"><a class="pagination-nav__link pagination-nav__link--prev" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Go å®‰å…¨æŒ‡å—"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Go å®‰å…¨æŒ‡å—</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/org/Tencent/è…¾è®¯ä»£ç å®‰å…¨æŒ‡å—/Python å®‰å…¨æŒ‡å—"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">Python å®‰å…¨æŒ‡å—</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å®‰å“ç±»" class="table-of-contents__link toc-highlight">å®‰å“ç±»</a><ul><li><a href="#1-ä»£ç å®ç°" class="table-of-contents__link toc-highlight">1. ä»£ç å®ç°</a></li><li><a href="#2-é…ç½®ç¯å¢ƒ" class="table-of-contents__link toc-highlight">2. é…ç½®&amp;ç¯å¢ƒ</a></li></ul></li><li><a href="#åå°ç±»" class="table-of-contents__link toc-highlight">åå°ç±»</a><ul><li><a href="#1-ä»£ç å®ç°-1" class="table-of-contents__link toc-highlight">1. ä»£ç å®ç°</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 â¤ï¸ <a href="https://blog.w2aa.ga/" target="_blank" rel="noopener noreferrer">æ—¶å…‰'s Blog</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fa47d194.js"></script>
<script src="/assets/js/main.5e182ebc.js"></script>
</body>
</html>